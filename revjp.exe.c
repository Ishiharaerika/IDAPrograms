/* This file was generated by the Hex-Rays decompiler version 7.7.0.220118.
   Copyright (c) 2007-2021 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int sub_401000();
int sub_40105D();
int sub_4010BA();
int sub_401117();
int sub_401174();
int sub_4011D1();
int sub_40122E();
int sub_40128B();
int sub_4012E8();
int sub_401307();
// void *__cdecl operator new(unsigned int, void *); idb
char sub_401328();
void *sub_40132F();
int __cdecl sub_401339(FILE *Stream, char *Format, _locale_t Locale, va_list ArgList); // idb
int sub_40135D(char *a1, ...);
_DWORD *__thiscall sub_40139A(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_4013C7(_DWORD *this, int a2);
int __thiscall sub_401401(_DWORD *this);
const char *__thiscall sub_401421(_DWORD *this);
_DWORD *__thiscall sub_401449(_DWORD *this, char a2);
_DWORD *__thiscall sub_401473(_DWORD *this, int a2);
_DWORD *__thiscall sub_401497(_DWORD *this, char a2);
int __thiscall sub_4014C1(_DWORD *this);
_DWORD *__thiscall sub_4014D2(_DWORD *this);
_DWORD *__thiscall sub_4014F4(_DWORD *this, char a2);
int __thiscall sub_40151E(_DWORD *this);
void __cdecl __noreturn sub_40152F();
_DWORD *__thiscall sub_40154D(_DWORD *this, int a2);
_DWORD *__thiscall sub_40156F(_DWORD *this, int a2);
// int std::numeric_limits<int>::min(void); weak
// int unknown_libname_1(void); weak
// int __scrt_stub_for_initialize_mta(void); weak
// int unknown_libname_2(void); weak
__int64 sub_4015B6();
__int64 sub_4015BF();
// void *__cdecl operator new(size_t Size, int, const char *, int); idb
_DWORD *__cdecl sub_4015D8(_DWORD *a1, _DWORD *a2);
// _DWORD __cdecl unknown_libname_3(_DWORD); weak
void sub_401642();
void __stdcall sub_40164B(int a1);
void *__thiscall sub_401656(void *this, int a2, int a3);
void __noreturn sub_401664(void); // weak
_DWORD *__thiscall sub_401674(_DWORD *this);
void __noreturn sub_401698(void); // weak
_DWORD *__thiscall sub_4016B6(_DWORD *this, int a2);
int (__thiscall ***__thiscall sub_4016D8(_DWORD **this))(_DWORD, int);
int __thiscall sub_401721(_DWORD *this, unsigned int a2);
_DWORD *__cdecl sub_401797(_DWORD *a1);
_DWORD *__cdecl sub_4017C3(_DWORD *a1);
_DWORD *__thiscall sub_401864(_DWORD *this, _DWORD *a2);
__int64 __thiscall sub_401882(void *this);
double __thiscall sub_401893(void *this);
void *__thiscall sub_4018A1(void *this);
unsigned int sub_4018AD();
// int *__userpurge sub_4018BC@<eax>(int *a1@<ecx>, int a2@<ebp>, _DWORD *a3);
int __thiscall sub_401984(_DWORD *this, int a2);
int *__thiscall sub_4019A1(int *this, int *a2);
int *__thiscall sub_4019DE(int *this);
int *__cdecl sub_4019EF(int *a1);
char __cdecl sub_401A6B(int *a1);
int __cdecl main(int argc, const char **argv, const char **envp);
__int64 __thiscall sub_401CA5(_QWORD *this);
_QWORD *__thiscall sub_401CC5(_QWORD *this);
int *__thiscall sub_401CF9(int *this);
int __thiscall sub_401D23(unsigned __int16 *this);
bool __thiscall sub_401D3B(unsigned __int16 *this, unsigned __int16 *a2);
unsigned __int16 *__thiscall sub_401D73(unsigned __int16 *this);
__int16 *__thiscall sub_401D9F(__int16 *this, __int16 a2);
int __thiscall sub_401DCB(_DWORD *this);
int *__thiscall sub_401DDF(int *this, int a2);
int __thiscall sub_401E05(_DWORD *this, int a2);
int __thiscall sub_401E22(_DWORD *this);
void __thiscall sub_401E40(int *this, unsigned int a2);
int *__thiscall sub_401E5B(int *this);
int *__thiscall sub_401E6C(int *this, int *a2);
_DWORD *__thiscall sub_401F52(_DWORD *this);
_DWORD *__thiscall sub_401F83(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_401FA1(_DWORD *this, _DWORD *a2);
int __thiscall sub_401FBF(_DWORD *this);
unsigned int *__thiscall sub_401FCE(size_t *this, char a2);
_BYTE *__stdcall sub_402042(_BYTE *a1, _BYTE *Src, size_t Size, char a4);
char *__thiscall sub_40208B(_DWORD *this, int a2);
void __thiscall sub_4020A1(void **this);
unsigned int *__thiscall sub_4020BA(unsigned int *this, char *Src);
void sub_402131();
void sub_402142();
int *__thiscall sub_402153(int **this);
int *__thiscall sub_40216E(_QWORD *this, int *a2, _QWORD *a3);
int *__thiscall sub_4021A2(int *this, int a2, int a3);
__int16 *__thiscall sub_4021D4(unsigned __int16 *this, __int16 *a2, unsigned __int16 *a3);
void *__thiscall sub_402205(void *this);
int *__thiscall sub_402216(int *this);
unsigned int __thiscall sub_4022C8(int *this, unsigned int a2);
_BYTE *__thiscall sub_40232A(void **this);
_BYTE *__thiscall sub_4023C9(int this);
unsigned int *__thiscall sub_4023FD(unsigned int *this, char *Src);
unsigned int *__thiscall sub_402424(unsigned int *this, char *Src, size_t Size);
_BYTE *__stdcall sub_40248D(_BYTE *a1, size_t Size, _BYTE *Src);
_DWORD *__thiscall sub_4024C0(_DWORD *this);
// int __cdecl std::numeric_limits<unsigned int>::max(_DWORD); weak
bool __cdecl sub_4024F8(_DWORD *a1, _DWORD *a2);
// _DWORD __cdecl std::_Narrow_char_traits<char,int>::to_char_type(_DWORD); weak
_BYTE *__cdecl sub_402524(_BYTE *a1, _BYTE *a2);
unsigned int __cdecl sub_402533(const char *a1);
_BYTE *__cdecl sub_402565(_BYTE *a1, _BYTE *Src, size_t Size);
void __thiscall sub_4025B7(void *this, int a2, int a3);
int __stdcall sub_4025D9(unsigned int a1);
_DWORD *__cdecl sub_4025F4(_DWORD *a1, _DWORD *a2);
void __stdcall sub_40261E(void *Block, int a2);
_BYTE *__thiscall sub_40263A(_DWORD *this, int a2);
int __thiscall sub_402677(void *this);
bool __thiscall sub_4026CF(_DWORD *this);
char *__cdecl sub_4026F2(char *a1, char *Src, size_t Size);
int __stdcall sub_4027C5(int a1);
void __stdcall sub_4027E0(void *Block, int a2);
void __thiscall sub_4027F8(_DWORD *this, unsigned int a2);
void sub_402813();
struct std::_Facet_base *__cdecl sub_402823(_DWORD *a1);
int __cdecl sub_40290E(int a1, _DWORD *a2);
_QWORD *__thiscall sub_402927(_QWORD *this, int *a2);
BOOL __cdecl sub_402943(void *a1);
int sub_40296C();
__int16 sub_40299E();
int sub_4029C4();
void __thiscall sub_4029E8(int *this, unsigned int a2, unsigned __int8 *a3);
_DWORD *__thiscall sub_402ABF(_DWORD *this, int a2, int a3);
int __thiscall sub_402ADE(void *this, char a2, char a3, int a4);
_DWORD *__thiscall sub_402B03(_DWORD *this, int a2);
_DWORD *__cdecl sub_402B21(_DWORD *a1, _DWORD *a2);
unsigned int *__thiscall sub_402B4B(size_t *this, size_t a2, char a3, char a4);
_DWORD *__thiscall sub_402C45(_DWORD *this, int a2);
void sub_402C63();
unsigned int *__thiscall sub_402C68(unsigned int *this, size_t Size, char a3, _BYTE *Src);
int __cdecl sub_402D1E(int a1, int a2);
int __cdecl sub_402D4A(unsigned int a1);
int __cdecl sub_402D70(_DWORD); // weak
void __cdecl sub_402D9C(void *Block, unsigned int a2);
int __cdecl sub_402DEA(int a1);
int __thiscall sub_402DF7(int *this);
int __thiscall sub_402E13(int (__thiscall ****this)(_DWORD, int));
_DWORD *__thiscall sub_402E44(_DWORD *this);
void __stdcall sub_402E64(int a1, int a2);
int __thiscall sub_402E6F(void *this, int a2, int a3, int a4);
unsigned int __thiscall sub_402E91(unsigned int *this, int a2);
_DWORD *__thiscall sub_402EC3(_DWORD *this);
int __stdcall sub_402EE5(int (__thiscall ***a1)(_DWORD, int));
unsigned int __cdecl sub_402F19(int a1, unsigned int a2, unsigned int a3);
int __cdecl sub_402F66(int a1, _DWORD *a2);
_DWORD *__thiscall sub_4031DB(_DWORD *this, char a2);
_DWORD *__cdecl sub_403200(_DWORD *a1, _DWORD *a2, void *a3);
BOOL __cdecl sub_403230(_DWORD *a1);
int __cdecl sub_403285(int a1, int a2, int a3, int a4);
__int16 __cdecl sub_4032D3(__int16 a1, __int16 a2);
int __cdecl sub_40331B(int a1, int a2);
int __thiscall sub_403363(_DWORD *this, unsigned int a2, unsigned __int8 *a3);
int __cdecl sub_40349C(char a1, char a2, int a3, int a4);
// _DWORD __cdecl unknown_libname_4(_DWORD); weak
unsigned int __cdecl sub_403533(unsigned int a1);
int __cdecl sub_403591(int *a1, int *a2);
int __cdecl sub_4035AC(int a1, int a2, int a3);
int __thiscall sub_403618(_DWORD *this);
int __thiscall sub_403629(_DWORD *this);
void sub_403643();
_DWORD *__thiscall sub_403665(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_40368D(_DWORD *this, int a2, int a3);
_WORD *__thiscall sub_4036A9(_WORD *this, __int16 a2, __int16 a3);
_DWORD *__thiscall sub_4036C5(_DWORD *this, int a2, int a3, int a4, int a5);
char __thiscall sub_4036E7(_BYTE *this);
_DWORD *__thiscall sub_4036F6(_DWORD *this, int a2, int a3);
int __thiscall sub_403751(_DWORD *this);
void __noreturn sub_4037AD(void); // weak
int __thiscall sub_4037BD(int *this, int a2, int a3, int a4);
int __thiscall sub_40385F(_DWORD *this, unsigned int a2);
int __thiscall sub_4038B1(void *this, char a2, char a3, int a4);
int __thiscall sub_4038D6(void *this);
_DWORD *__thiscall sub_40390C(_DWORD *this, unsigned int a2);
_DWORD *__thiscall sub_40392C(_DWORD *this, unsigned int a2);
_DWORD *__thiscall sub_403957(_DWORD *this, int a2, int a3);
_WORD *__thiscall sub_40397A(_WORD *this, __int16 a2, __int16 a3);
_DWORD *__thiscall sub_40399D(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_4039C6(_DWORD *this, int a2);
int __thiscall sub_403A0B(void *this, char a2, char a3, int a4, int a5);
int __thiscall sub_403A30(_DWORD *this);
int sub_403A4E();
_DWORD *__thiscall sub_403A58(_DWORD *this, unsigned int a2, int a3, int a4);
_DWORD *__thiscall sub_403A80(_DWORD *this, int a2, int a3);
_WORD *__thiscall sub_403A9C(_WORD *this, __int16 a2, __int16 a3);
_DWORD *__thiscall sub_403AB8(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_403ADA(_DWORD *this, unsigned int a2, int a3);
_DWORD *__thiscall sub_403B49(_DWORD *this, int a2, int a3);
_WORD *__thiscall sub_403B65(_WORD *this, __int16 a2, __int16 a3);
_DWORD *__thiscall sub_403B85(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_403BAD(_DWORD *this, int a2, int a3);
_DWORD *__cdecl sub_403BCB(_DWORD *a1, int *a2, void *a3);
bool __cdecl sub_403C1C(_DWORD *a1, _DWORD *a2);
_DWORD *__cdecl sub_403C46(_DWORD *a1, _DWORD *a2, _DWORD *a3);
bool __cdecl sub_403C80(int a1, void *a2);
int __thiscall sub_403D4C(int *this, int a2);
__int16 __thiscall sub_403D73(__int16 *this, int a2);
int __thiscall sub_403D98(int *this, int a2);
int __thiscall sub_403DB9(_DWORD *this, int a2);
int __thiscall sub_403E0A(_DWORD *this);
_QWORD *__thiscall sub_403E49(_QWORD *this, _QWORD *a2);
_QWORD *__thiscall sub_403E6F(_QWORD *this, _QWORD *a2);
_DWORD *__cdecl sub_403E95(_DWORD *a1, void *a2);
__int64 *__thiscall sub_403F52(__int64 *this, void *a2);
__int64 *__thiscall sub_403F7F(__int64 *this, void *a2);
bool __cdecl sub_403FAC(_DWORD *a1, _DWORD *a2);
_DWORD *__cdecl sub_403FDF(_DWORD *a1, int *a2, int *a3);
__int64 *__thiscall sub_404034(__int64 *this, void *a2);
bool __cdecl sub_404061(void *a1, void *a2);
_DWORD *__cdecl sub_4040BD(_DWORD *a1, void *a2);
int __thiscall sub_40415C(void *this, int a2, int a3, int a4, int a5, int a6);
__int16 __thiscall sub_4041FE(void *this, int a2, __int16 a3, __int16 a4);
int __thiscall sub_404278(void *this, int a2, int a3, int a4);
_DWORD *__cdecl sub_4042E0(int a1, void *a2, int a3);
int *__cdecl sub_40430D(int a1, void *a2);
unsigned int __thiscall sub_40432A(_DWORD *this);
int __thiscall sub_40437B(_DWORD *this, unsigned int a2);
_DWORD *__thiscall sub_40441A(_DWORD *this, int a2);
__int16 __thiscall sub_404478(_DWORD *this, unsigned __int16 a2);
__int64 __thiscall sub_404528(int this);
unsigned __int64 __thiscall sub_40459A(int this, unsigned __int64 a2);
_DWORD *__thiscall sub_404700(_DWORD *this, int a2);
int __cdecl sub_40478F(int a1);
__int16 __cdecl sub_4047A8(__int16 a1);
int __cdecl sub_4047C1(int a1, int a2);
_DWORD *__thiscall sub_4047DE(_DWORD *this, _DWORD *a2);
int *__thiscall sub_404802(int *this);
unsigned int __thiscall sub_404823(_DWORD *this);
__int64 __thiscall sub_404857(_QWORD *this);
int __cdecl sub_4048A7(int a1);
__int16 __cdecl sub_4048D1(__int16 a1);
// _DWORD __cdecl operator"" _l(_DWORD, _DWORD); weak
int __thiscall sub_4048E5(_DWORD *this);
unsigned int __thiscall sub_40497E(_DWORD *this);
_BYTE *__thiscall sub_404A02(_BYTE *this);
_DWORD *__cdecl sub_404B5C(_DWORD *a1, void *a2);
_DWORD *__cdecl sub_404C18(_DWORD *a1, void *a2);
bool __cdecl sub_404CD4(int *a1, int *a2);
_DWORD *__cdecl sub_404D3E(_DWORD *a1, void *a2);
double *__thiscall sub_404DF1(double *this, void *a2);
double *__thiscall sub_404E1B(double *this, void *a2);
_QWORD *__cdecl sub_404E45(_QWORD *a1, void *a2);
_QWORD *__cdecl sub_404F17(_QWORD *a1, void *a2);
_QWORD *__thiscall sub_404FF1(_QWORD *this, _QWORD *a2);
// void __thiscall std::_Fac_tidy_reg_t::~_Fac_tidy_reg_t(std::_Fac_tidy_reg_t *__hidden this); idb
// void __cdecl std::_Facet_Register(struct std::_Facet_base *); idb
// int __cdecl atexit(void (__cdecl *)());
void __cdecl sub_405312(void *Block);
_DWORD *__thiscall sub_405320(_DWORD *Block, char a2);
int sub_4053EE();
int sub_4053F6();
_DWORD *__thiscall sub_405597(_DWORD *this);
void __noreturn sub_4055AF(); // weak
void __noreturn sub_4055CC(); // weak
int sub_4057B9();
int __cdecl UserMathErrorFunction();
LPTOP_LEVEL_EXCEPTION_FILTER sub_40592E();
// LONG __stdcall __scrt_unhandled_exception_filter(struct _EXCEPTION_POINTERS *ExceptionInfo); idb
void sub_405990();
void __cdecl j_free(void *Block);
void sub_405ACA();
char sub_405AD6();
void *sub_405AFA();
// int __scrt_initialize_default_local_stdio_options(void); weak
BOOL sub_405B1D();
void *sub_405B29();
void *sub_405B2F();
void sub_405B35();
void __cdecl sub_405B61(); // idb
// void __stdcall __noreturn CxxThrowException(void *pExceptionObject, _ThrowInfo *pThrowInfo);
// int __cdecl set_new_mode(int NewMode);
// unsigned __int64 __usercall sub_4063A3@<edx:eax>(unsigned __int64 a1@<edx:eax>);
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// void *__cdecl memmove(void *, const void *Src, size_t Size);
void __cdecl sub_406612(); // idb
void __cdecl sub_406621(); // idb
void __cdecl sub_406630(); // idb
void __cdecl sub_40663F(); // idb
void __cdecl sub_40664E(); // idb
void __cdecl sub_40665D(); // idb
void __cdecl sub_40666C(); // idb
void __cdecl sub_40667B(); // idb
void __cdecl sub_40668A(); // idb
void __cdecl sub_406699(); // idb
// int __thiscall std::ios::setstate(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::ios::rdbuf(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::streambuf::sgetc(_DWORD); weak
// int __thiscall std::ios_base::getloc(_DWORD, _DWORD); weak
// int __thiscall std::streambuf::snextc(_DWORD); weak
// __int64 __thiscall std::ios_base::width(std::ios_base *__hidden this); weak
// int __cdecl std::ctype<char>::_Getcat(_DWORD, _DWORD); weak
// int __thiscall std::ctype<char>::is(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::locale::id::operator unsigned int(_DWORD); weak
// int __thiscall std::istream::_Ipfx(_DWORD, _DWORD); weak
// void __cdecl __noreturn std::_Xlength_error(const char *); weak
// unsigned int __cdecl std::_Random_device(); weak
// void __cdecl std::_Xout_of_range(const char *); weak
// int std::locale::_Getgloballocale(void); weak
// _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this, _DWORD); weak
// void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this); weak
// __int64 __thiscall std::ios_base::width(std::ios_base *__hidden this, __int64); weak
// int __cdecl _std_exception_copy(_DWORD, _DWORD); weak
// int __cdecl _std_exception_destroy(_DWORD); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_4064CA; // weak
// extern void (__stdcall *InitializeSListHead)(PSLIST_HEADER ListHead);
// extern LPTOP_LEVEL_EXCEPTION_FILTER (__stdcall *SetUnhandledExceptionFilter)(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
// extern __int64 (__cdecl *Xtime_get_ticks)();
// extern __int64 (__cdecl *Query_perf_frequency)();
// extern __int64 (__cdecl *Query_perf_counter)();
// extern void (__cdecl *Thrd_sleep)(const xtime *);
// extern _UNKNOWN std::ctype<char>::id; weak
// extern _UNKNOWN std::cin; weak
// extern void (__cdecl __noreturn *invalid_parameter_noinfo_noreturn)();
// extern int (__cdecl *getchar)();
// extern int (__cdecl *_stdio_common_vfprintf)(unsigned __int64 Options, FILE *Stream, const char *Format, _locale_t Locale, va_list ArgList);
// extern FILE *(__cdecl *_acrt_iob_func)(unsigned int Ix);
void *type_info::`vftable' = &sub_405320; // weak
void *std::exception::`vftable' = &sub_401449; // weak
void *std::bad_alloc::`vftable' = &sub_401497; // weak
void *std::bad_array_new_length::`vftable' = &sub_4014F4; // weak
void *std::bad_cast::`vftable' = &sub_401497; // weak
const _ThrowInfo _TI2_AVbad_alloc_std__ = { 0u, &sub_4014C1, NULL, &_CTA2_AVbad_alloc_std__ }; // idb
const _ThrowInfo _TI2_AVbad_cast_std__ = { 0u, &sub_4014C1, NULL, &_CTA2_AVbad_cast_std__ }; // idb
const _ThrowInfo _TI3_AVbad_array_new_length_std__ = { 0u, &sub_40151E, NULL, &_CTA3_AVbad_array_new_length_std__ }; // idb
int dword_409010 = 1; // weak
_UNKNOWN unk_4090BC; // weak
int dword_4090F0 = 0; // weak
union _SLIST_HEADER ListHead = { 0ui64 }; // idb
_UNKNOWN unk_409100; // weak
_UNKNOWN unk_409428; // weak
int dword_409430; // weak
int dword_409434[3]; // weak
int dword_409440[3]; // weak
int dword_40944C[3]; // weak
int dword_409458[3]; // weak
int dword_409464[3]; // weak
unsigned int dword_409470[6]; // weak
int dword_409488[3]; // weak
int dword_409494[3]; // weak
int dword_4094A0[3]; // weak
_UNKNOWN unk_4094AC; // weak
_UNKNOWN unk_4094B0; // weak


//----- (00401000) --------------------------------------------------------
int sub_401000()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "https://discord.gg/fmhw85T5zM");
  v2 = 0;
  sub_4018BC(dword_40944C, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_406612);
}
// 40944C: using guessed type int dword_40944C[3];

//----- (0040105D) --------------------------------------------------------
int sub_40105D()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "V1rtu4lAll0c");
  v2 = 0;
  sub_4018BC(dword_409458, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_406621);
}
// 409458: using guessed type int dword_409458[3];

//----- (004010BA) --------------------------------------------------------
int sub_4010BA()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "jpofwejfdslfkjdslkfghiphap332oiu");
  v2 = 0;
  sub_4018BC(dword_4094A0, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_406630);
}
// 4094A0: using guessed type int dword_4094A0[3];

//----- (00401117) --------------------------------------------------------
int sub_401117()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "Ohu3mNdslwoxfedlo34");
  v2 = 0;
  sub_4018BC(dword_409440, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_40663F);
}
// 409440: using guessed type int dword_409440[3];

//----- (00401174) --------------------------------------------------------
int sub_401174()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "2-mk43xxy0.1k");
  v2 = 0;
  sub_4018BC(dword_409464, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_40664E);
}
// 409464: using guessed type int dword_409464[3];

//----- (004011D1) --------------------------------------------------------
int sub_4011D1()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, ";32;42;65;33;91;52");
  v2 = 0;
  sub_4018BC(dword_409494, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_40665D);
}
// 409494: using guessed type int dword_409494[3];

//----- (0040122E) --------------------------------------------------------
int sub_40122E()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "S`=d`Y9{]D}_vK$#.");
  v2 = 0;
  sub_4018BC(dword_409434, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_40666C);
}
// 409434: using guessed type int dword_409434[3];

//----- (0040128B) --------------------------------------------------------
int sub_40128B()
{
  void *v1[6]; // [esp+0h] [ebp-24h] BYREF
  int v2; // [esp+20h] [ebp-4h]
  int savedregs; // [esp+24h] [ebp+0h] BYREF

  sub_4020BA((unsigned int *)v1, "xxxxxGot7.5_HUH?98rjoi2r3oifjdsoigfogdfs");
  v2 = 0;
  sub_4018BC(dword_409488, (int)&savedregs, v1);
  v2 = -1;
  sub_4020A1(v1);
  return atexit(sub_40667B);
}
// 409488: using guessed type int dword_409488[3];

//----- (004012E8) --------------------------------------------------------
int sub_4012E8()
{
  sub_4020BA(dword_409470, "H4ndy51mpL30bFusC4tI0NL1bR4RybYM3mB3R_TH4nKs");
  return atexit(sub_40668A);
}
// 409470: using guessed type unsigned int dword_409470[6];

//----- (00401307) --------------------------------------------------------
int sub_401307()
{
  return atexit(sub_406699);
}

//----- (00401328) --------------------------------------------------------
char sub_401328()
{
  return 0;
}

//----- (0040132F) --------------------------------------------------------
void *sub_40132F()
{
  return &unk_409428;
}

//----- (00401339) --------------------------------------------------------
int __cdecl sub_401339(FILE *Stream, char *Format, _locale_t Locale, va_list ArgList)
{
  unsigned __int64 *v4; // eax

  v4 = (unsigned __int64 *)sub_40132F();
  return _stdio_common_vfprintf(*v4, Stream, Format, Locale, ArgList);
}

//----- (0040135D) --------------------------------------------------------
int sub_40135D(char *a1, ...)
{
  FILE *Stream; // [esp+4h] [ebp-Ch]
  va_list va; // [esp+1Ch] [ebp+Ch] BYREF

  va_start(va, a1);
  Stream = _acrt_iob_func(1u);
  return sub_401339(Stream, a1, 0, va);
}

//----- (0040139A) --------------------------------------------------------
_DWORD *__thiscall sub_40139A(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // ecx

  *this = &std::exception::`vftable';
  v3 = this + 1;
  *v3 = 0;
  v3[1] = 0;
  this[1] = a2;
  return this;
}
// 4071BC: using guessed type void *std::exception::`vftable';

//----- (004013C7) --------------------------------------------------------
_DWORD *__thiscall sub_4013C7(_DWORD *this, int a2)
{
  _DWORD *v2; // ecx

  *this = &std::exception::`vftable';
  v2 = this + 1;
  *v2 = 0;
  v2[1] = 0;
  _std_exception_copy(a2 + 4, v2);
  return this;
}
// 4070AC: using guessed type int __cdecl _std_exception_copy(_DWORD, _DWORD);
// 4071BC: using guessed type void *std::exception::`vftable';

//----- (00401401) --------------------------------------------------------
int __thiscall sub_401401(_DWORD *this)
{
  *this = &std::exception::`vftable';
  return _std_exception_destroy(this + 1);
}
// 4070B8: using guessed type int __cdecl _std_exception_destroy(_DWORD);
// 4071BC: using guessed type void *std::exception::`vftable';

//----- (00401421) --------------------------------------------------------
const char *__thiscall sub_401421(_DWORD *this)
{
  if ( this[1] )
    return (const char *)this[1];
  else
    return "Unknown exception";
}

//----- (00401449) --------------------------------------------------------
_DWORD *__thiscall sub_401449(_DWORD *this, char a2)
{
  sub_401401(this);
  if ( (a2 & 1) != 0 )
    sub_405312(this);
  return this;
}

//----- (00401473) --------------------------------------------------------
_DWORD *__thiscall sub_401473(_DWORD *this, int a2)
{
  sub_40139A(this, a2, 1);
  *this = &std::bad_alloc::`vftable';
  return this;
}
// 4071C8: using guessed type void *std::bad_alloc::`vftable';

//----- (00401497) --------------------------------------------------------
_DWORD *__thiscall sub_401497(_DWORD *this, char a2)
{
  sub_4014C1(this);
  if ( (a2 & 1) != 0 )
    sub_405312(this);
  return this;
}

//----- (004014C1) --------------------------------------------------------
int __thiscall sub_4014C1(_DWORD *this)
{
  return sub_401401(this);
}

//----- (004014D2) --------------------------------------------------------
_DWORD *__thiscall sub_4014D2(_DWORD *this)
{
  sub_401473(this, (int)"bad array new length");
  *this = &std::bad_array_new_length::`vftable';
  return this;
}
// 4071E4: using guessed type void *std::bad_array_new_length::`vftable';

//----- (004014F4) --------------------------------------------------------
_DWORD *__thiscall sub_4014F4(_DWORD *this, char a2)
{
  sub_40151E(this);
  if ( (a2 & 1) != 0 )
    sub_405312(this);
  return this;
}

//----- (0040151E) --------------------------------------------------------
int __thiscall sub_40151E(_DWORD *this)
{
  return sub_4014C1(this);
}

//----- (0040152F) --------------------------------------------------------
void __noreturn sub_40152F()
{
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  sub_4014D2(pExceptionObject);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVbad_array_new_length_std__);
}
// 40152F: using guessed type void __noreturn sub_40152F();
// 40152F: using guessed type _DWORD pExceptionObject[3];

//----- (0040154D) --------------------------------------------------------
_DWORD *__thiscall sub_40154D(_DWORD *this, int a2)
{
  sub_40156F(this, a2);
  *this = &std::bad_array_new_length::`vftable';
  return this;
}
// 4071E4: using guessed type void *std::bad_array_new_length::`vftable';

//----- (0040156F) --------------------------------------------------------
_DWORD *__thiscall sub_40156F(_DWORD *this, int a2)
{
  sub_4013C7(this, a2);
  *this = &std::bad_alloc::`vftable';
  return this;
}
// 4071C8: using guessed type void *std::bad_alloc::`vftable';

//----- (004015B6) --------------------------------------------------------
__int64 sub_4015B6()
{
  return 0i64;
}

//----- (004015BF) --------------------------------------------------------
__int64 sub_4015BF()
{
  return -1i64;
}

//----- (004015D8) --------------------------------------------------------
_DWORD *__cdecl sub_4015D8(_DWORD *a1, _DWORD *a2)
{
  _DWORD *result; // eax
  int v3; // [esp+8h] [ebp-8h]
  unsigned int v4; // [esp+Ch] [ebp-4h]

  *a2 += 35;
  v3 = *(_DWORD *)(*a1 - 4);
  v4 = *a1 - v3;
  if ( v4 < 4 || v4 > 0x23 )
    invalid_parameter_noinfo_noreturn();
  result = a1;
  *a1 = v3;
  return result;
}

//----- (00401642) --------------------------------------------------------
void sub_401642()
{
  ;
}

//----- (0040164B) --------------------------------------------------------
void __stdcall sub_40164B(int a1)
{
  ;
}

//----- (00401656) --------------------------------------------------------
void *__thiscall sub_401656(void *this, int a2, int a3)
{
  return this;
}

//----- (00401664) --------------------------------------------------------
void __noreturn sub_401664()
{
  std::_Xlength_error("string too long");
}
// 401664: using guessed type void __noreturn sub_401664();
// 40706C: using guessed type void __cdecl __noreturn std::_Xlength_error(const char *);

//----- (00401674) --------------------------------------------------------
_DWORD *__thiscall sub_401674(_DWORD *this)
{
  sub_40139A(this, (int)"bad cast", 1);
  *this = &std::bad_cast::`vftable';
  return this;
}
// 4073D4: using guessed type void *std::bad_cast::`vftable';

//----- (00401698) --------------------------------------------------------
void __noreturn sub_401698()
{
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  sub_401674(pExceptionObject);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_cast_std__);
}
// 401698: using guessed type void __noreturn sub_401698();
// 401698: using guessed type _DWORD pExceptionObject[3];

//----- (004016B6) --------------------------------------------------------
_DWORD *__thiscall sub_4016B6(_DWORD *this, int a2)
{
  sub_4013C7(this, a2);
  *this = &std::bad_cast::`vftable';
  return this;
}
// 4073D4: using guessed type void *std::bad_cast::`vftable';

//----- (004016D8) --------------------------------------------------------
int (__thiscall ***__thiscall sub_4016D8(_DWORD **this))(_DWORD, int)
{
  int (__thiscall ***result)(_DWORD, int); // eax

  result = (int (__thiscall ***)(_DWORD, int))this;
  if ( this[1] )
  {
    result = (int (__thiscall ***)(_DWORD, int))(*(int (__thiscall **)(_DWORD *))(*this[1] + 8))(this[1]);
    if ( result )
      return (int (__thiscall ***)(_DWORD, int))(**result)(result, 1);
  }
  return result;
}

//----- (00401721) --------------------------------------------------------
int __thiscall sub_401721(_DWORD *this, unsigned int a2)
{
  int v3; // [esp+0h] [ebp-10h]
  int v4; // [esp+8h] [ebp-8h]

  if ( a2 >= *(_DWORD *)(this[1] + 12) )
    v4 = 0;
  else
    v4 = *(_DWORD *)(*(_DWORD *)(this[1] + 8) + 4 * a2);
  if ( v4 || !*(_BYTE *)(this[1] + 20) )
    return v4;
  v3 = std::locale::_Getgloballocale();
  if ( a2 >= *(_DWORD *)(v3 + 12) )
    return 0;
  else
    return *(_DWORD *)(*(_DWORD *)(v3 + 8) + 4 * a2);
}
// 407080: using guessed type int std::locale::_Getgloballocale(void);

//----- (00401797) --------------------------------------------------------
_DWORD *__cdecl sub_401797(_DWORD *a1)
{
  _DWORD *v1; // eax
  int v3; // [esp+0h] [ebp-10h] BYREF
  __int64 ticks; // [esp+8h] [ebp-8h] BYREF

  ticks = Xtime_get_ticks();
  v1 = sub_401864(&v3, &ticks);
  sub_401F83(a1, v1);
  return a1;
}

//----- (004017C3) --------------------------------------------------------
_DWORD *__cdecl sub_4017C3(_DWORD *a1)
{
  _DWORD *v1; // eax
  int v3; // [esp+0h] [ebp-30h] BYREF
  __int64 v4; // [esp+8h] [ebp-28h] BYREF
  __int64 v5; // [esp+10h] [ebp-20h]
  __int64 v6; // [esp+18h] [ebp-18h]
  __int64 perf_counter; // [esp+20h] [ebp-10h]
  __int64 perf_frequency; // [esp+28h] [ebp-8h]

  perf_frequency = Query_perf_frequency();
  perf_counter = Query_perf_counter();
  v6 = 1000000000 * (perf_counter / perf_frequency);
  v5 = 1000000000 * (perf_counter % perf_frequency) / perf_frequency;
  v4 = v5 + v6;
  v1 = sub_401864(&v3, &v4);
  sub_401F83(a1, v1);
  return a1;
}

//----- (00401864) --------------------------------------------------------
_DWORD *__thiscall sub_401864(_DWORD *this, _DWORD *a2)
{
  int v3; // ecx

  v3 = a2[1];
  *this = *a2;
  this[1] = v3;
  return this;
}

//----- (00401882) --------------------------------------------------------
__int64 __thiscall sub_401882(void *this)
{
  return *(_QWORD *)this;
}

//----- (00401893) --------------------------------------------------------
double __thiscall sub_401893(void *this)
{
  return *(double *)this;
}

//----- (004018A1) --------------------------------------------------------
void *__thiscall sub_4018A1(void *this)
{
  return this;
}

//----- (004018AD) --------------------------------------------------------
unsigned int sub_4018AD()
{
  return std::_Random_device();
}
// 407070: using guessed type unsigned int __cdecl std::_Random_device();

//----- (004018BC) --------------------------------------------------------
int *__userpurge sub_4018BC@<eax>(int *a1@<ecx>, int a2@<ebp>, _DWORD *a3)
{
  int v3; // eax
  unsigned int v4; // eax
  char *v5; // eax
  int *v6; // eax
  int v7; // ecx
  int v8; // eax
  int *v9; // eax
  int v10; // edx
  int v12; // [esp-30h] [ebp-3Ch] BYREF
  int v13; // [esp-28h] [ebp-34h]
  int v14; // [esp-24h] [ebp-30h]
  int *v15; // [esp-20h] [ebp-2Ch]
  int *v16; // [esp-1Ch] [ebp-28h]
  int *v17; // [esp-18h] [ebp-24h]
  unsigned int i; // [esp-14h] [ebp-20h]
  int *v19; // [esp-10h] [ebp-1Ch]
  struct _EXCEPTION_REGISTRATION_RECORD *ExceptionList; // [esp-Ch] [ebp-18h]
  void *v21; // [esp-8h] [ebp-14h]
  int v22; // [esp-4h] [ebp-10h]
  int v23; // [esp+0h] [ebp-Ch]
  int v24; // [esp+4h] [ebp-8h]
  int v25; // [esp+8h] [ebp-4h] BYREF
  int retaddr; // [esp+Ch] [ebp+0h]

  v23 = a2;
  v24 = retaddr;
  v22 = -1;
  v21 = &loc_4064CA;
  ExceptionList = NtCurrentTeb()->NtTib.ExceptionList;
  v19 = &v25;
  v17 = a1;
  sub_401F52(a1);
  v22 = 0;
  v16 = v17;
  v3 = sub_401FBF(a3);
  sub_401E40(v17, v3);
  for ( i = 0; ; ++i )
  {
    v4 = sub_401FBF(a3);
    if ( i >= v4 )
      break;
    v5 = sub_40208B(a3, i);
    v6 = sub_401DDF(&v12, *v5);
    v7 = *v6;
    v8 = v6[1];
    v13 = v7;
    v14 = v8;
    v15 = v17;
    v9 = (int *)sub_401E05(v17, i);
    v10 = v14;
    *v9 = v13;
    v9[1] = v10;
  }
  return v17;
}

//----- (00401984) --------------------------------------------------------
int __thiscall sub_401984(_DWORD *this, int a2)
{
  return sub_401E05(this, a2);
}

//----- (004019A1) --------------------------------------------------------
int *__thiscall sub_4019A1(int *this, int *a2)
{
  sub_401E6C(a2, this);
  return a2;
}

//----- (004019DE) --------------------------------------------------------
int *__thiscall sub_4019DE(int *this)
{
  return sub_401E5B(this);
}

//----- (004019EF) --------------------------------------------------------
int *__cdecl sub_4019EF(int *a1)
{
  void *v2[6]; // [esp+0h] [ebp-28h] BYREF
  int v3; // [esp+18h] [ebp-10h]
  int v4; // [esp+24h] [ebp-4h]
  int savedregs; // [esp+28h] [ebp+0h] BYREF

  v3 = 0;
  sub_40135D("Password: ");
  sub_4020BA((unsigned int *)v2, "v2");
  v4 = 0;
  sub_40290E(std::cin, v2);
  sub_4018BC(a1, (int)&savedregs, v2);
  v3 |= 1u;
  v4 = -1;
  sub_4020A1(v2);
  return a1;
}

//----- (00401A6B) --------------------------------------------------------
char __cdecl sub_401A6B(int *a1)
{
  int v1; // esi
  __int16 v3; // ax
  unsigned __int16 v4; // ax
  _DWORD *v5; // eax
  int v6; // esi
  int v7; // edi
  unsigned __int16 v8; // ax
  _DWORD *v9; // eax
  int v10[3]; // [esp+8h] [ebp-54h] BYREF
  int v11[3]; // [esp+14h] [ebp-48h] BYREF
  int v12[3]; // [esp+20h] [ebp-3Ch] BYREF
  __int16 v13; // [esp+2Ch] [ebp-30h] BYREF
  int *v14; // [esp+30h] [ebp-2Ch]
  int *v15; // [esp+34h] [ebp-28h]
  int *v16; // [esp+38h] [ebp-24h]
  int *v17; // [esp+3Ch] [ebp-20h]
  __int16 v18; // [esp+40h] [ebp-1Ch] BYREF
  BOOL v19; // [esp+44h] [ebp-18h]
  unsigned __int16 v20[3]; // [esp+48h] [ebp-14h] BYREF
  bool v21; // [esp+4Eh] [ebp-Eh]
  bool v22; // [esp+4Fh] [ebp-Dh]
  int v23; // [esp+58h] [ebp-4h]

  v16 = sub_4019A1(a1, v11);
  v17 = sub_4019A1(dword_409434, v12);
  v1 = sub_401E22(v17);
  v19 = sub_401E22(v16) != v1;
  v22 = v19;
  sub_401E5B(v12);
  sub_401E5B(v11);
  if ( v22 )
    return 0;
  sub_401D9F((__int16 *)v20, 0);
  sub_401D9F(&v18, 7);
  while ( 1 )
  {
    v15 = sub_4019A1(dword_409434, v10);
    v14 = v15;
    v23 = 0;
    v3 = sub_401E22(v15);
    sub_401D9F(&v13, v3);
    v21 = sub_401D3B(v20, (unsigned __int16 *)&v13);
    v23 = -1;
    sub_401E5B(v10);
    if ( !v21 )
      break;
    v4 = sub_401D23(v20);
    v5 = (_DWORD *)sub_401984(a1, v4);
    v6 = sub_401DCB(v5);
    v7 = (unsigned __int16)sub_401D23((unsigned __int16 *)&v18);
    v8 = sub_401D23(v20);
    v9 = (_DWORD *)sub_401984(dword_409434, v8);
    if ( v6 != (sub_401DCB(v9) ^ v7) )
      return 0;
    sub_401D73(v20);
    sub_401D73((unsigned __int16 *)&v18);
  }
  return 1;
}
// 409434: using guessed type int dword_409434[3];
// 401A6B: using guessed type int var_48[3];
// 401A6B: using guessed type int var_3C[3];
// 401A6B: using guessed type unsigned __int16 var_14[3];
// 401A6B: using guessed type int var_54[3];

//----- (00401BC9) --------------------------------------------------------
int __cdecl main(int argc, const char **argv, const char **envp)
{
  _QWORD *v3; // eax
  __int64 v4; // rax
  _QWORD *v5; // eax
  int v7[4]; // [esp+0h] [ebp-34h] BYREF
  int v8[3]; // [esp+10h] [ebp-24h] BYREF
  __int64 v9; // [esp+1Ch] [ebp-18h] BYREF
  int v10; // [esp+24h] [ebp-10h] BYREF
  int v11; // [esp+30h] [ebp-4h]

  sub_401CF9(v7);
  sub_40135D("%s()\n", "main");
  sub_40135D("Find correct password\n");
  while ( 1 )
  {
    sub_4019EF(v8);
    v11 = 0;
    if ( sub_401A6B(v8) )
      break;
    v3 = sub_401CC5(v7);
    v4 = sub_401CA5(v3);
    sub_40135D("Incorrect!(%llu)\n", v4);
    v10 = 200;
    v5 = sub_402927(&v9, &v10);
    sub_402943(v5);
    v11 = -1;
    sub_4019DE(v8);
  }
  v11 = -1;
  sub_4019DE(v8);
  sub_40135D("Correct!\nPlease send DM with PW.\n");
  getchar();
  getchar();
  return 0;
}
// 401BC9: using guessed type int var_34[4];
// 401BC9: using guessed type int var_24[3];

//----- (00401CA5) --------------------------------------------------------
__int64 __thiscall sub_401CA5(_QWORD *this)
{
  return *this ^ this[1];
}

//----- (00401CC5) --------------------------------------------------------
_QWORD *__thiscall sub_401CC5(_QWORD *this)
{
  int *v1; // eax
  int *v2; // eax
  _DWORD *v3; // edi
  int v5[4]; // [esp+8h] [ebp-24h] BYREF
  int v6[4]; // [esp+18h] [ebp-14h] BYREF
  _QWORD *v7; // [esp+28h] [ebp-4h]

  v7 = this;
  v1 = sub_4021A2(v6, 1, 0);
  v2 = sub_40216E(v7, v5, v1);
  v3 = v7;
  *(_DWORD *)v7 = *v2;
  *++v3 = v2[1];
  *++v3 = v2[2];
  v3[1] = v2[3];
  return v7;
}
// 401CC5: using guessed type int var_14[4];
// 401CC5: using guessed type int var_24[4];

//----- (00401CF9) --------------------------------------------------------
int *__thiscall sub_401CF9(int *this)
{
  int v1; // edx
  int v2; // ecx

  *this = sub_40296C();
  this[1] = v1;
  v2 = this[1];
  this[2] = *this;
  this[3] = v2;
  return this;
}
// 401D0A: variable 'v1' is possibly undefined

//----- (00401D23) --------------------------------------------------------
int __thiscall sub_401D23(unsigned __int16 *this)
{
  return *this ^ this[1];
}

//----- (00401D3B) --------------------------------------------------------
bool __thiscall sub_401D3B(unsigned __int16 *this, unsigned __int16 *a2)
{
  int v2; // esi

  v2 = (unsigned __int16)sub_401D23(this);
  return v2 < (unsigned __int16)sub_401D23(a2);
}

//----- (00401D73) --------------------------------------------------------
unsigned __int16 *__thiscall sub_401D73(unsigned __int16 *this)
{
  __int16 *v1; // eax
  __int16 *v2; // eax
  __int16 v4; // [esp+0h] [ebp-Ch] BYREF
  __int16 v5; // [esp+4h] [ebp-8h] BYREF
  unsigned __int16 *v6; // [esp+8h] [ebp-4h]

  v6 = this;
  v1 = sub_401D9F(&v5, 1);
  v2 = sub_4021D4(v6, &v4, (unsigned __int16 *)v1);
  *(_DWORD *)v6 = *(_DWORD *)v2;
  return v6;
}

//----- (00401D9F) --------------------------------------------------------
__int16 *__thiscall sub_401D9F(__int16 *this, __int16 a2)
{
  *this = sub_40299E();
  this[1] = *this ^ a2;
  return this;
}

//----- (00401DCB) --------------------------------------------------------
int __thiscall sub_401DCB(_DWORD *this)
{
  return *this ^ this[1];
}

//----- (00401DDF) --------------------------------------------------------
int *__thiscall sub_401DDF(int *this, int a2)
{
  *this = sub_4029C4();
  this[1] = *this ^ a2;
  return this;
}

//----- (00401E05) --------------------------------------------------------
int __thiscall sub_401E05(_DWORD *this, int a2)
{
  return *this + 8 * a2;
}

//----- (00401E22) --------------------------------------------------------
int __thiscall sub_401E22(_DWORD *this)
{
  return (this[1] - *this) >> 3;
}

//----- (00401E40) --------------------------------------------------------
void __thiscall sub_401E40(int *this, unsigned int a2)
{
  unsigned __int8 v2; // [esp+7h] [ebp-1h] BYREF

  sub_4029E8(this, a2, &v2);
}

//----- (00401E5B) --------------------------------------------------------
int *__thiscall sub_401E5B(int *this)
{
  return sub_402216(this);
}

//----- (00401E6C) --------------------------------------------------------
int *__thiscall sub_401E6C(int *this, int *a2)
{
  int v4; // [esp+8h] [ebp-30h]
  int v5; // [esp+Ch] [ebp-2Ch]
  int *v6[2]; // [esp+10h] [ebp-28h] BYREF
  int *v7; // [esp+18h] [ebp-20h]
  int v8; // [esp+1Ch] [ebp-1Ch]
  int v9; // [esp+20h] [ebp-18h]
  int *v10; // [esp+24h] [ebp-14h]
  char v11[2]; // [esp+28h] [ebp-10h] BYREF
  char v12; // [esp+2Ah] [ebp-Eh] BYREF
  char v13; // [esp+2Bh] [ebp-Dh] BYREF
  int v14; // [esp+34h] [ebp-4h]

  v10 = this;
  sub_402205(a2);
  v5 = unknown_libname_3(&v12);
  LOBYTE(v4) = v11[1];
  sub_402ABF(this, v4, v5);
  v7 = v10;
  v6[1] = a2;
  v8 = *a2;
  v9 = a2[1];
  sub_401656(&v13, (int)v11, (int)v10);
  if ( v8 != v9 )
  {
    sub_4022C8(v10, (v9 - v8) >> 3);
    v6[0] = v10;
    v14 = 0;
    v7[1] = sub_402ADE(v10, v8, v9, *v7);
    v6[0] = 0;
    v14 = -1;
    sub_402153(v6);
  }
  sub_401642();
  return v10;
}
// 401EB6: variable 'v4' is possibly undefined
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00401F52) --------------------------------------------------------
_DWORD *__thiscall sub_401F52(_DWORD *this)
{
  int v2; // [esp+0h] [ebp-14h]
  char v4; // [esp+13h] [ebp-1h] BYREF

  sub_402B03(this, v2);
  sub_40164B((int)&v4);
  return this;
}
// 401F67: variable 'v2' is possibly undefined

//----- (00401F83) --------------------------------------------------------
_DWORD *__thiscall sub_401F83(_DWORD *this, _DWORD *a2)
{
  int v2; // eax

  v2 = a2[1];
  *this = *a2;
  this[1] = v2;
  return this;
}

//----- (00401FA1) --------------------------------------------------------
_DWORD *__thiscall sub_401FA1(_DWORD *this, _DWORD *a2)
{
  int v2; // eax

  v2 = this[1];
  *a2 = *this;
  a2[1] = v2;
  return a2;
}

//----- (00401FBF) --------------------------------------------------------
int __thiscall sub_401FBF(_DWORD *this)
{
  return this[4];
}

//----- (00401FCE) --------------------------------------------------------
unsigned int *__thiscall sub_401FCE(size_t *this, char a2)
{
  char v3; // [esp+0h] [ebp-14h]
  _DWORD *v4; // [esp+4h] [ebp-10h]
  size_t v5; // [esp+8h] [ebp-Ch]
  char v6; // [esp+13h] [ebp-1h] BYREF

  v5 = this[4];
  if ( v5 >= this[5] )
    return sub_402B4B(this, 1u, v3, a2);
  this[4] = v5 + 1;
  v4 = sub_4024C0(this);
  sub_402524((_BYTE *)v4 + v5, &a2);
  v6 = 0;
  return (unsigned int *)sub_402524((_BYTE *)v4 + v5 + 1, &v6);
}
// 402039: variable 'v3' is possibly undefined

//----- (00402042) --------------------------------------------------------
_BYTE *__stdcall sub_402042(_BYTE *a1, _BYTE *Src, size_t Size, char a4)
{
  char v5; // [esp+7h] [ebp-1h] BYREF

  sub_402565(a1, Src, Size);
  sub_402524(&a1[Size], &a4);
  v5 = 0;
  return sub_402524(&a1[Size + 1], &v5);
}

//----- (0040208B) --------------------------------------------------------
char *__thiscall sub_40208B(_DWORD *this, int a2)
{
  return (char *)sub_4024C0(this) + a2;
}

//----- (004020A1) --------------------------------------------------------
void __thiscall sub_4020A1(void **this)
{
  sub_40232A(this);
  sub_402131();
}

//----- (004020BA) --------------------------------------------------------
unsigned int *__thiscall sub_4020BA(unsigned int *this, char *Src)
{
  int v3; // [esp+0h] [ebp-20h]
  char v5; // [esp+12h] [ebp-Eh] BYREF
  char v6; // [esp+13h] [ebp-Dh] BYREF
  int v7; // [esp+1Ch] [ebp-4h]

  sub_402C45(this, v3);
  v7 = 0;
  sub_401656(&v6, (int)&v5, (int)this);
  sub_4023C9((int)this);
  sub_4023FD(this, Src);
  sub_401642();
  return this;
}
// 4020E4: variable 'v3' is possibly undefined

//----- (00402131) --------------------------------------------------------
void sub_402131()
{
  sub_402142();
}

//----- (00402142) --------------------------------------------------------
void sub_402142()
{
  sub_401642();
}

//----- (00402153) --------------------------------------------------------
int *__thiscall sub_402153(int **this)
{
  int *result; // eax

  result = (int *)this;
  if ( *this )
    return sub_402216(*this);
  return result;
}

//----- (0040216E) --------------------------------------------------------
int *__thiscall sub_40216E(_QWORD *this, int *a2, _QWORD *a3)
{
  __int64 v3; // kr00_8
  __int64 v4; // rax

  v3 = sub_401CA5(this);
  v4 = sub_401CA5(a3);
  sub_4021A2(a2, v4 + v3, (unsigned __int64)(v4 + v3) >> 32);
  return a2;
}

//----- (004021A2) --------------------------------------------------------
int *__thiscall sub_4021A2(int *this, int a2, int a3)
{
  int v3; // edx
  int v4; // edx

  *this = sub_40296C();
  this[1] = v3;
  v4 = this[1] ^ a3;
  this[2] = *this ^ a2;
  this[3] = v4;
  return this;
}
// 4021B3: variable 'v3' is possibly undefined

//----- (004021D4) --------------------------------------------------------
__int16 *__thiscall sub_4021D4(unsigned __int16 *this, __int16 *a2, unsigned __int16 *a3)
{
  __int16 v3; // si
  __int16 v4; // ax

  v3 = sub_401D23(this);
  v4 = sub_401D23(a3);
  sub_401D9F(a2, v4 + v3);
  return a2;
}

//----- (00402205) --------------------------------------------------------
void *__thiscall sub_402205(void *this)
{
  return sub_4018A1(this);
}

//----- (00402216) --------------------------------------------------------
int *__thiscall sub_402216(int *this)
{
  int *result; // eax
  int *v2; // [esp+Ch] [ebp-20h]
  int *v3; // [esp+10h] [ebp-1Ch]

  v3 = this + 1;
  v2 = this + 2;
  sub_401642();
  result = this;
  if ( *this )
  {
    sub_4025B7(this, *this, *v3);
    sub_402205(this);
    sub_40261E((void *)*this, (*v2 - *this) >> 3);
    *this = 0;
    *v3 = 0;
    result = v2;
    *v2 = 0;
  }
  return result;
}

//----- (004022C8) --------------------------------------------------------
unsigned int __thiscall sub_4022C8(int *this, unsigned int a2)
{
  int v2; // eax
  unsigned int result; // eax
  unsigned int *v4; // [esp+0h] [ebp-1Ch]
  int *v5; // [esp+4h] [ebp-18h]

  v5 = this + 1;
  v4 = (unsigned int *)(this + 2);
  sub_402205(this);
  v2 = sub_4025D9(a2);
  *this = v2;
  *v5 = v2;
  result = v2 + 8 * a2;
  *v4 = result;
  return result;
}

//----- (0040232A) --------------------------------------------------------
_BYTE *__thiscall sub_40232A(void **this)
{
  void *Block; // [esp+4h] [ebp-18h]
  char v4; // [esp+Fh] [ebp-Dh] BYREF

  sub_401642();
  if ( sub_4026CF(this) )
  {
    Block = *this;
    sub_402205(this);
    sub_402C63();
    sub_4027E0(Block, (int)this[5] + 1);
  }
  this[4] = 0;
  this[5] = (void *)15;
  v4 = 0;
  return sub_402524(this, &v4);
}

//----- (004023C9) --------------------------------------------------------
_BYTE *__thiscall sub_4023C9(int this)
{
  char v2; // [esp+7h] [ebp-1h] BYREF

  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 15;
  v2 = 0;
  return sub_402524((_BYTE *)this, &v2);
}

//----- (004023FD) --------------------------------------------------------
unsigned int *__thiscall sub_4023FD(unsigned int *this, char *Src)
{
  unsigned int v2; // eax
  size_t v3; // eax

  v2 = sub_402533(Src);
  v3 = unknown_libname_3(v2);
  return sub_402424(this, Src, v3);
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00402424) --------------------------------------------------------
unsigned int *__thiscall sub_402424(unsigned int *this, char *Src, size_t Size)
{
  char v4; // [esp+0h] [ebp-10h]
  char *v5; // [esp+4h] [ebp-Ch]
  char v7; // [esp+Fh] [ebp-1h] BYREF

  if ( Size > this[5] )
    return sub_402C68(this, Size, v4, Src);
  v5 = (char *)sub_4024C0(this);
  this[4] = Size;
  sub_4026F2(v5, Src, Size);
  v7 = 0;
  sub_402524(&v5[Size], &v7);
  return this;
}
// 402484: variable 'v4' is possibly undefined

//----- (0040248D) --------------------------------------------------------
_BYTE *__stdcall sub_40248D(_BYTE *a1, size_t Size, _BYTE *Src)
{
  char v4; // [esp+7h] [ebp-1h] BYREF

  sub_402565(a1, Src, Size);
  v4 = 0;
  return sub_402524(&a1[Size], &v4);
}

//----- (004024C0) --------------------------------------------------------
_DWORD *__thiscall sub_4024C0(_DWORD *this)
{
  _DWORD *v2; // [esp+0h] [ebp-8h]

  v2 = this;
  if ( sub_4026CF(this) )
    return (_DWORD *)unknown_libname_3(*this);
  return v2;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (004024F8) --------------------------------------------------------
bool __cdecl sub_4024F8(_DWORD *a1, _DWORD *a2)
{
  return *a1 == *a2;
}

//----- (00402524) --------------------------------------------------------
_BYTE *__cdecl sub_402524(_BYTE *a1, _BYTE *a2)
{
  _BYTE *result; // eax

  result = a1;
  *a1 = *a2;
  return result;
}

//----- (00402533) --------------------------------------------------------
unsigned int __cdecl sub_402533(const char *a1)
{
  return strlen(a1);
}

//----- (00402565) --------------------------------------------------------
_BYTE *__cdecl sub_402565(_BYTE *a1, _BYTE *Src, size_t Size)
{
  size_t i; // [esp+0h] [ebp-4h]

  if ( sub_401328() )
  {
    for ( i = 0; i < Size; ++i )
      a1[i] = Src[i];
    return a1;
  }
  else
  {
    memcpy(a1, Src, Size);
    return a1;
  }
}

//----- (004025B7) --------------------------------------------------------
void __thiscall sub_4025B7(void *this, int a2, int a3)
{
  sub_402205(this);
  sub_402C63();
}

//----- (004025D9) --------------------------------------------------------
int __stdcall sub_4025D9(unsigned int a1)
{
  int v1; // eax

  v1 = sub_402D4A(a1);
  return sub_402D70(v1);
}
// 402D70: using guessed type int __cdecl sub_402D70(_DWORD);

//----- (004025F4) --------------------------------------------------------
_DWORD *__cdecl sub_4025F4(_DWORD *a1, _DWORD *a2)
{
  if ( *a1 >= *a2 )
    return a1;
  else
    return a2;
}

//----- (0040261E) --------------------------------------------------------
void __stdcall sub_40261E(void *Block, int a2)
{
  sub_402D9C(Block, 8 * a2);
}

//----- (0040263A) --------------------------------------------------------
_BYTE *__thiscall sub_40263A(_DWORD *this, int a2)
{
  _DWORD *v3; // [esp+4h] [ebp-Ch]
  char v5; // [esp+Fh] [ebp-1h] BYREF

  v5 = 0;
  v3 = sub_4024C0(this);
  this[4] = a2;
  return sub_402524((_BYTE *)v3 + a2, &v5);
}

//----- (00402677) --------------------------------------------------------
int __thiscall sub_402677(void *this)
{
  void *v1; // eax
  int v3; // [esp+0h] [ebp-18h] BYREF
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h]
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  int v7[2]; // [esp+10h] [ebp-8h] BYREF

  v7[1] = (int)this;
  v1 = sub_402205(this);
  v6 = std::numeric_limits<unsigned int>::max(v1);
  v7[0] = 16;
  v5 = *sub_4025F4(&v6, v7);
  v4 = v5 - 1;
  v3 = unknown_libname_1();
  return *sub_402B21(&v3, &v4);
}
// 40159B: using guessed type int unknown_libname_1(void);
// 4024F0: using guessed type int __cdecl std::numeric_limits<unsigned int>::max(_DWORD);

//----- (004026CF) --------------------------------------------------------
bool __thiscall sub_4026CF(_DWORD *this)
{
  return this[5] >= 0x10u;
}

//----- (004026F2) --------------------------------------------------------
char *__cdecl sub_4026F2(char *a1, char *Src, size_t Size)
{
  char *i; // [esp+4h] [ebp-10h]
  size_t k; // [esp+8h] [ebp-Ch]
  size_t j; // [esp+Ch] [ebp-8h]
  char v7; // [esp+13h] [ebp-1h]

  if ( sub_401328() )
  {
    if ( a1 == Src )
    {
      return a1;
    }
    else
    {
      v7 = 1;
      for ( i = Src; i != &Src[Size]; ++i )
      {
        if ( a1 == i )
        {
          v7 = 0;
          break;
        }
      }
      if ( v7 )
      {
        for ( j = 0; j < Size; ++j )
          a1[j] = Src[j];
      }
      else
      {
        for ( k = 0; k < Size; ++k )
          a1[Size - 1 - k] = Src[Size - 1 - k];
      }
      return a1;
    }
  }
  else
  {
    memmove(a1, Src, Size);
    return a1;
  }
}

//----- (004027C5) --------------------------------------------------------
int __stdcall sub_4027C5(int a1)
{
  int v1; // eax

  v1 = sub_402DEA(a1);
  return sub_402D70(v1);
}
// 402D70: using guessed type int __cdecl sub_402D70(_DWORD);

//----- (004027E0) --------------------------------------------------------
void __stdcall sub_4027E0(void *Block, int a2)
{
  sub_402D9C(Block, a2);
}

//----- (004027F8) --------------------------------------------------------
void __thiscall sub_4027F8(_DWORD *this, unsigned int a2)
{
  if ( this[4] < a2 )
    sub_402813();
}

//----- (00402813) --------------------------------------------------------
void sub_402813()
{
  std::_Xout_of_range("invalid string position");
}
// 407078: using guessed type void __cdecl std::_Xout_of_range(const char *);

//----- (00402823) --------------------------------------------------------
struct std::_Facet_base *__cdecl sub_402823(_DWORD *a1)
{
  struct std::_Facet_base *v2; // [esp+0h] [ebp-28h]
  char v3[4]; // [esp+4h] [ebp-24h] BYREF
  unsigned int v4; // [esp+8h] [ebp-20h]
  int (__thiscall ***v5)(_DWORD, int); // [esp+Ch] [ebp-1Ch] BYREF
  struct std::_Facet_base *v6; // [esp+10h] [ebp-18h]
  struct std::_Facet_base *v7; // [esp+14h] [ebp-14h]
  struct std::_Facet_base *v8; // [esp+18h] [ebp-10h] BYREF
  int v9; // [esp+24h] [ebp-4h]

  std::_Lockit::_Lockit((std::_Lockit *)v3, 0);
  v9 = 0;
  v8 = (struct std::_Facet_base *)dword_409430;
  v4 = std::locale::id::operator unsigned int(std::ctype<char>::id);
  v6 = (struct std::_Facet_base *)sub_401721(a1, v4);
  if ( !v6 )
  {
    if ( v8 )
    {
      v6 = v8;
    }
    else
    {
      if ( std::ctype<char>::_Getcat(&v8, a1) == -1 )
        sub_401698();
      v7 = v8;
      sub_4031DB(&v5, (char)v8);
      LOBYTE(v9) = 1;
      std::_Facet_Register(v7);
      (*(void (__thiscall **)(struct std::_Facet_base *))(*(_DWORD *)v7 + 4))(v7);
      dword_409430 = (int)v8;
      v6 = v8;
      sub_402DF7((int *)&v5);
      LOBYTE(v9) = 0;
      sub_402E13(&v5);
    }
  }
  v2 = v6;
  v9 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)v3);
  return v2;
}
// 401698: using guessed type void __noreturn sub_401698(void);
// 40704C: using guessed type int __cdecl std::ctype<char>::_Getcat(_DWORD, _DWORD);
// 407054: using guessed type int __thiscall std::locale::id::operator unsigned int(_DWORD);
// 407084: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this, _DWORD);
// 407088: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 409430: using guessed type int dword_409430;
// 402823: using guessed type char var_24[4];

//----- (0040290E) --------------------------------------------------------
int __cdecl sub_40290E(int a1, _DWORD *a2)
{
  int v2; // eax

  v2 = unknown_libname_3(a1);
  return sub_402F66(v2, a2);
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00402927) --------------------------------------------------------
_QWORD *__thiscall sub_402927(_QWORD *this, int *a2)
{
  *this = *a2;
  return this;
}

//----- (00402943) --------------------------------------------------------
BOOL __cdecl sub_402943(void *a1)
{
  _DWORD *v1; // eax
  _DWORD *v2; // eax
  int v4; // [esp+0h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-8h] BYREF

  v1 = sub_4017C3(&v5);
  v2 = sub_403200(&v4, v1, a1);
  return sub_403230(v2);
}

//----- (0040296C) --------------------------------------------------------
int sub_40296C()
{
  __int64 v1; // [esp+0h] [ebp-10h]
  __int64 v2; // [esp+8h] [ebp-8h]

  v2 = sub_4015BF();
  v1 = sub_4015B6();
  return sub_403285(v1, SHIDWORD(v1), v2, SHIDWORD(v2));
}

//----- (0040299E) --------------------------------------------------------
__int16 sub_40299E()
{
  __int16 v0; // ax
  __int16 v2; // [esp+4h] [ebp-4h]

  v2 = unknown_libname_2();
  v0 = __scrt_stub_for_initialize_mta();
  return sub_4032D3(v0, v2);
}
// 4015A5: using guessed type int __scrt_stub_for_initialize_mta(void);
// 4015AC: using guessed type int unknown_libname_2(void);

//----- (004029C4) --------------------------------------------------------
int sub_4029C4()
{
  int v1; // [esp+0h] [ebp-8h]
  int v2; // [esp+4h] [ebp-4h]

  v2 = unknown_libname_1();
  v1 = std::numeric_limits<int>::min();
  return sub_40331B(v1, v2);
}
// 401591: using guessed type int std::numeric_limits<int>::min(void);
// 40159B: using guessed type int unknown_libname_1(void);

//----- (004029E8) --------------------------------------------------------
void __thiscall sub_4029E8(int *this, unsigned int a2, unsigned __int8 *a3)
{
  int v3; // [esp+4h] [ebp-1Ch]
  unsigned int v4; // [esp+8h] [ebp-18h]
  int v5; // [esp+14h] [ebp-Ch]
  int *v7; // [esp+1Ch] [ebp-4h]

  v7 = this + 1;
  v4 = (this[1] - *this) >> 3;
  if ( a2 >= v4 )
  {
    if ( a2 > v4 )
    {
      if ( a2 <= (this[2] - *this) >> 3 )
      {
        v3 = *v7;
        *v7 = sub_402E6F(this, *v7, a2 - v4, *a3);
        sub_402E64(v3, v3);
      }
      else
      {
        sub_403363(this, a2, a3);
      }
    }
  }
  else
  {
    v5 = *this + 8 * a2;
    sub_402E64(v5, *v7);
    sub_4025B7(this, v5, *v7);
    *v7 = v5;
  }
}

//----- (00402ABF) --------------------------------------------------------
_DWORD *__thiscall sub_402ABF(_DWORD *this, int a2, int a3)
{
  unknown_libname_3(a3);
  sub_402E44(this);
  return this;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00402ADE) --------------------------------------------------------
int __thiscall sub_402ADE(void *this, char a2, char a3, int a4)
{
  void *v4; // eax

  v4 = sub_402205(this);
  return sub_40349C(a2, a3, a4, (int)v4);
}

//----- (00402B03) --------------------------------------------------------
_DWORD *__thiscall sub_402B03(_DWORD *this, int a2)
{
  sub_4018A1(this);
  sub_402E44(this);
  return this;
}

//----- (00402B21) --------------------------------------------------------
_DWORD *__cdecl sub_402B21(_DWORD *a1, _DWORD *a2)
{
  if ( *a2 >= *a1 )
    return a1;
  else
    return a2;
}

//----- (00402B4B) --------------------------------------------------------
unsigned int *__thiscall sub_402B4B(size_t *this, size_t a2, char a3, char a4)
{
  _BYTE *v4; // eax
  _BYTE *v5; // eax
  _BYTE *v7; // [esp+0h] [ebp-28h]
  void *Block; // [esp+8h] [ebp-20h]
  unsigned int v9; // [esp+Ch] [ebp-1Ch]
  unsigned int v10; // [esp+10h] [ebp-18h]
  int v11; // [esp+18h] [ebp-10h] BYREF
  size_t Size; // [esp+1Ch] [ebp-Ch]
  unsigned int *v13; // [esp+20h] [ebp-8h]
  void *Src; // [esp+24h] [ebp-4h]

  v13 = this;
  Src = this;
  Size = this[4];
  if ( sub_402677(this) - Size < a2 )
    sub_401664();
  v9 = *((_DWORD *)Src + 5);
  v10 = sub_402E91(v13, a2 + Size);
  sub_402205(v13);
  v11 = sub_4027C5(v10 + 1);
  sub_401642();
  *((_DWORD *)Src + 4) = a2 + Size;
  *((_DWORD *)Src + 5) = v10;
  v4 = (_BYTE *)unknown_libname_3(v11);
  v7 = v4;
  if ( v9 < 0x10 )
  {
    sub_402042(v4, Src, Size, a4);
    sub_402D1E((int)Src, (int)&v11);
  }
  else
  {
    Block = *(void **)Src;
    v5 = (_BYTE *)unknown_libname_3(*(_DWORD *)Src);
    sub_402042(v7, v5, Size, a4);
    sub_4027E0(Block, v9 + 1);
    *(_DWORD *)Src = v11;
  }
  return v13;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);
// 401664: using guessed type void __noreturn sub_401664(void);

//----- (00402C45) --------------------------------------------------------
_DWORD *__thiscall sub_402C45(_DWORD *this, int a2)
{
  sub_4018A1(this);
  sub_402EC3(this);
  return this;
}

//----- (00402C63) --------------------------------------------------------
void sub_402C63()
{
  ;
}

//----- (00402C68) --------------------------------------------------------
unsigned int *__thiscall sub_402C68(unsigned int *this, size_t Size, char a3, _BYTE *Src)
{
  _BYTE *v4; // eax
  unsigned int v6; // [esp+4h] [ebp-10h]
  unsigned int v7; // [esp+8h] [ebp-Ch]
  int v8; // [esp+Ch] [ebp-8h] BYREF
  unsigned int *v9; // [esp+10h] [ebp-4h]

  v9 = this;
  if ( Size > sub_402677(this) )
    sub_401664();
  v6 = v9[5];
  v7 = sub_402E91(v9, Size);
  sub_402205(v9);
  v8 = sub_4027C5(v7 + 1);
  sub_401642();
  v9[4] = Size;
  v9[5] = v7;
  v4 = (_BYTE *)unknown_libname_3(v8);
  sub_40248D(v4, Size, Src);
  if ( v6 < 0x10 )
  {
    sub_402D1E((int)v9, (int)&v8);
  }
  else
  {
    sub_4027E0((void *)*v9, v6 + 1);
    *v9 = v8;
  }
  return v9;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);
// 401664: using guessed type void __noreturn sub_401664(void);

//----- (00402D1E) --------------------------------------------------------
int __cdecl sub_402D1E(int a1, int a2)
{
  void *v2; // eax
  int result; // eax
  _DWORD *v4; // [esp+0h] [ebp-4h]

  v2 = (void *)unknown_libname_3(a1);
  v4 = operator new(4u, v2);
  result = *(_DWORD *)unknown_libname_3(a2);
  *v4 = result;
  return result;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00402D4A) --------------------------------------------------------
int __cdecl sub_402D4A(unsigned int a1)
{
  if ( a1 > 0x1FFFFFFF )
    sub_40152F(0x1FFFFFFF);
  return 8 * a1;
}
// 40152F: using guessed type void __cdecl __noreturn sub_40152F(_DWORD);

//----- (00402D70) --------------------------------------------------------
#error "402D90: call analysis failed (funcsize=17)"

//----- (00402D9C) --------------------------------------------------------
void __cdecl sub_402D9C(void *Block, unsigned int a2)
{
  if ( a2 >= 0x1000 )
    sub_4015D8(&Block, &a2);
  sub_405312(Block);
}

//----- (00402DEA) --------------------------------------------------------
int __cdecl sub_402DEA(int a1)
{
  return a1;
}

//----- (00402DF7) --------------------------------------------------------
int __thiscall sub_402DF7(int *this)
{
  int v2; // [esp+4h] [ebp-4h] BYREF

  v2 = 0;
  return sub_403591(this, &v2);
}

//----- (00402E13) --------------------------------------------------------
int __thiscall sub_402E13(int (__thiscall ****this)(_DWORD, int))
{
  int result; // eax

  result = (int)this;
  if ( *this )
  {
    sub_4018A1(this);
    return sub_402EE5(*this);
  }
  return result;
}

//----- (00402E44) --------------------------------------------------------
_DWORD *__thiscall sub_402E44(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  this[2] = 0;
  return this;
}

//----- (00402E64) --------------------------------------------------------
void __stdcall sub_402E64(int a1, int a2)
{
  ;
}

//----- (00402E6F) --------------------------------------------------------
int __thiscall sub_402E6F(void *this, int a2, int a3, int a4)
{
  void *v4; // eax

  v4 = sub_402205(this);
  return sub_4035AC(a2, a3, (int)v4);
}

//----- (00402E91) --------------------------------------------------------
unsigned int __thiscall sub_402E91(unsigned int *this, int a2)
{
  int v3; // [esp+4h] [ebp-8h]

  v3 = sub_402677(this);
  return sub_402F19(a2, this[5], v3);
}

//----- (00402EC3) --------------------------------------------------------
_DWORD *__thiscall sub_402EC3(_DWORD *this)
{
  sub_4018A1(this);
  this[4] = 0;
  this[5] = 0;
  return this;
}

//----- (00402EE5) --------------------------------------------------------
int __stdcall sub_402EE5(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  result = (int)a1;
  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (00402F19) --------------------------------------------------------
unsigned int __cdecl sub_402F19(int a1, unsigned int a2, unsigned int a3)
{
  unsigned int v4; // [esp+0h] [ebp-8h] BYREF
  int v5; // [esp+4h] [ebp-4h] BYREF

  v5 = a1 | 0xF;
  if ( (a1 | 0xFu) > a3 )
    return a3;
  if ( a2 > a3 - (a2 >> 1) )
    return a3;
  v4 = a2 + (a2 >> 1);
  return *sub_4025F4(&v5, &v4);
}

//----- (00402F66) --------------------------------------------------------
int __cdecl sub_402F66(int a1, _DWORD *a2)
{
  unsigned int v2; // eax
  unsigned __int8 v3; // al
  char v4; // al
  int v6; // [esp+0h] [ebp-88h] BYREF
  int v7; // [esp+4h] [ebp-84h]
  int v8; // [esp+8h] [ebp-80h]
  _DWORD *v9[2]; // [esp+Ch] [ebp-7Ch] BYREF
  _DWORD v10[2]; // [esp+14h] [ebp-74h] BYREF
  __int64 v11; // [esp+1Ch] [ebp-6Ch]
  __int64 v12; // [esp+24h] [ebp-64h]
  __int64 v13; // [esp+2Ch] [ebp-5Ch]
  int v14; // [esp+34h] [ebp-54h]
  std::ios_base *v15; // [esp+3Ch] [ebp-4Ch]
  int v16; // [esp+40h] [ebp-48h]
  struct std::_Facet_base *v17; // [esp+44h] [ebp-44h]
  int v18; // [esp+48h] [ebp-40h] BYREF
  int v19; // [esp+4Ch] [ebp-3Ch]
  int v20; // [esp+50h] [ebp-38h]
  int v21; // [esp+54h] [ebp-34h]
  int v22; // [esp+58h] [ebp-30h]
  _DWORD *v23; // [esp+5Ch] [ebp-2Ch]
  _DWORD *v24; // [esp+60h] [ebp-28h]
  int v25; // [esp+64h] [ebp-24h]
  int v26; // [esp+68h] [ebp-20h] BYREF
  int v27; // [esp+6Ch] [ebp-1Ch]
  int v28; // [esp+70h] [ebp-18h]
  int v29; // [esp+74h] [ebp-14h]
  int *v30; // [esp+78h] [ebp-10h]
  int v31; // [esp+7Ch] [ebp-Ch]
  int v32; // [esp+80h] [ebp-8h]
  int v33; // [esp+84h] [ebp-4h]

  v30 = &v6;
  v28 = 0;
  HIBYTE(v29) = 0;
  sub_4036F6(v10, a1, 0);
  v33 = 0;
  if ( sub_4036E7(v10) )
  {
    v25 = *(_DWORD *)(*(_DWORD *)a1 + 4) + a1;
    v24 = (_DWORD *)std::ios_base::getloc(v25, v9);
    v23 = v24;
    LOBYTE(v33) = 1;
    v17 = sub_402823(v24);
    LOBYTE(v33) = 0;
    sub_4016D8(v9);
    sub_40392C(a2, 0);
    LOBYTE(v33) = 2;
    v13 = std::ios_base::width((std::ios_base *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1));
    if ( v13 <= 0
      || (v12 = std::ios_base::width((std::ios_base *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1)),
          v2 = sub_402677(a2),
          (unsigned int)v12 >= v2) )
    {
      v27 = sub_402677(a2);
    }
    else
    {
      v11 = std::ios_base::width((std::ios_base *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1));
      v27 = v11;
    }
    v22 = std::ios::rdbuf(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1, v6, v7);
    v21 = std::streambuf::sgetc(v22);
    v26 = v21;
    while ( v27 )
    {
      v18 = std::numeric_limits<unsigned int>::max(v6);
      if ( sub_4024F8(&v18, &v26) )
      {
        v28 |= 1u;
        break;
      }
      v3 = std::_Narrow_char_traits<char,int>::to_char_type(&v26);
      BYTE2(v29) = std::ctype<char>::is(v17, 72, v3);
      if ( BYTE2(v29) )
        break;
      v4 = std::_Narrow_char_traits<char,int>::to_char_type(&v26);
      sub_401FCE(a2, v4);
      HIBYTE(v29) = 1;
      --v27;
      v20 = std::ios::rdbuf(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1, v6, v7);
      v19 = std::streambuf::snextc(v20);
      v26 = v19;
    }
    v33 = 0;
  }
  v15 = (std::ios_base *)(*(_DWORD *)(*(_DWORD *)a1 + 4) + a1);
  std::ios_base::width(v15, 0i64);
  if ( !HIBYTE(v29) )
    v28 |= 2u;
  std::ios::setstate(
    *(_DWORD *)(*(_DWORD *)a1 + 4) + a1,
    v28,
    0,
    v6,
    v7,
    v8,
    v9[0],
    v9[1],
    v10[0],
    v10[1],
    v11,
    HIDWORD(v11),
    v12,
    HIDWORD(v12),
    v13,
    HIDWORD(v13),
    v14,
    *(_DWORD *)(*(_DWORD *)a1 + 4) + a1,
    v15,
    v16,
    v17,
    v18,
    v19,
    v20,
    v21,
    v22,
    v23,
    v24,
    v25,
    v26,
    v27,
    v28,
    v29,
    v30,
    v31,
    v32,
    v33);
  v14 = a1;
  v33 = -1;
  sub_403618(v10);
  return v14;
}
// 4024F0: using guessed type int __cdecl std::numeric_limits<unsigned int>::max(_DWORD);
// 40251A: using guessed type _DWORD __cdecl std::_Narrow_char_traits<char,int>::to_char_type(_DWORD);
// 407034: using guessed type int __thiscall std::ios::setstate(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 407038: using guessed type int __thiscall std::ios::rdbuf(_DWORD, _DWORD, _DWORD);
// 40703C: using guessed type int __thiscall std::streambuf::sgetc(_DWORD);
// 407040: using guessed type int __thiscall std::ios_base::getloc(_DWORD, _DWORD);
// 407044: using guessed type int __thiscall std::streambuf::snextc(_DWORD);
// 407048: using guessed type __int64 __thiscall std::ios_base::width(std::ios_base *__hidden this);
// 407050: using guessed type int __thiscall std::ctype<char>::is(_DWORD, _DWORD, _DWORD);
// 40708C: using guessed type __int64 __thiscall std::ios_base::width(std::ios_base *__hidden this, __int64);
// 402F66: using guessed type _DWORD var_74[2];

//----- (004031DB) --------------------------------------------------------
_DWORD *__thiscall sub_4031DB(_DWORD *this, char a2)
{
  int v3; // [esp+0h] [ebp-Ch]

  sub_403BAD(this, v3, (int)&a2);
  return this;
}
// 4031F4: variable 'v3' is possibly undefined

//----- (00403200) --------------------------------------------------------
_DWORD *__cdecl sub_403200(_DWORD *a1, _DWORD *a2, void *a3)
{
  int *v3; // eax
  _DWORD *v4; // eax
  int v6; // [esp+0h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-8h] BYREF

  v3 = sub_401FA1(a2, &v7);
  v4 = sub_403BCB(&v6, v3, a3);
  sub_401F83(a1, v4);
  return a1;
}

//----- (00403230) --------------------------------------------------------
BOOL __cdecl sub_403230(_DWORD *a1)
{
  BOOL result; // eax
  _DWORD *v2; // eax
  xtime v3; // [esp+0h] [ebp-20h] BYREF
  int v4; // [esp+10h] [ebp-10h] BYREF
  _DWORD v5[2]; // [esp+18h] [ebp-8h] BYREF

  while ( 1 )
  {
    sub_4017C3(v5);
    result = sub_403C1C(a1, v5);
    if ( result )
      break;
    v2 = sub_403C46(&v4, a1, v5);
    sub_403C80((int)&v3, v2);
    Thrd_sleep(&v3);
  }
  return result;
}
// 403230: using guessed type _DWORD var_8[2];

//----- (00403285) --------------------------------------------------------
int __cdecl sub_403285(int a1, int a2, int a3, int a4)
{
  unsigned int v4; // eax
  _DWORD v6[1250]; // [esp+0h] [ebp-139Ch] BYREF
  int v7[4]; // [esp+1388h] [ebp-14h] BYREF
  char v8; // [esp+139Bh] [ebp-1h] BYREF

  sub_4018A1(&v8);
  v4 = sub_4018AD();
  sub_40390C(v6, v4);
  sub_4036C5(v7, a1, a2, a3, a4);
  return sub_403D4C(v7, (int)v6);
}
// 403285: using guessed type _DWORD var_139C[1250];
// 403285: using guessed type int var_14[4];

//----- (004032D3) --------------------------------------------------------
__int16 __cdecl sub_4032D3(__int16 a1, __int16 a2)
{
  unsigned int v2; // eax
  _DWORD v4[1250]; // [esp+0h] [ebp-1390h] BYREF
  __int16 v5[3]; // [esp+1388h] [ebp-8h] BYREF
  char v6; // [esp+138Fh] [ebp-1h] BYREF

  sub_4018A1(&v6);
  v2 = sub_4018AD();
  sub_40390C(v4, v2);
  sub_4036A9(v5, a1, a2);
  return sub_403D73(v5, (int)v4);
}
// 4032D3: using guessed type _DWORD var_1390[1250];
// 4032D3: using guessed type __int16 var_8[3];

//----- (0040331B) --------------------------------------------------------
int __cdecl sub_40331B(int a1, int a2)
{
  unsigned int v2; // eax
  _DWORD v4[1250]; // [esp+0h] [ebp-1394h] BYREF
  int v5[2]; // [esp+1388h] [ebp-Ch] BYREF
  char v6; // [esp+1393h] [ebp-1h] BYREF

  sub_4018A1(&v6);
  v2 = sub_4018AD();
  sub_40390C(v4, v2);
  sub_40368D(v5, a1, a2);
  return sub_403D98(v5, (int)v4);
}
// 40331B: using guessed type _DWORD var_1394[1250];

//----- (00403363) --------------------------------------------------------
int __thiscall sub_403363(_DWORD *this, unsigned int a2, unsigned __int8 *a3)
{
  int v4; // [esp+0h] [ebp-4Ch] BYREF
  int v5; // [esp+10h] [ebp-3Ch]
  void *v6; // [esp+14h] [ebp-38h]
  int v7; // [esp+18h] [ebp-34h]
  _DWORD *v8; // [esp+1Ch] [ebp-30h]
  _DWORD *v9; // [esp+20h] [ebp-2Ch]
  int v10; // [esp+24h] [ebp-28h]
  _DWORD *v11; // [esp+28h] [ebp-24h]
  int v12; // [esp+2Ch] [ebp-20h]
  int v13; // [esp+30h] [ebp-1Ch]
  void *Block; // [esp+34h] [ebp-18h]
  _DWORD *v15; // [esp+38h] [ebp-14h]
  int *v16; // [esp+3Ch] [ebp-10h]
  int v17; // [esp+48h] [ebp-4h]

  v16 = &v4;
  v15 = this;
  if ( a2 > sub_4038D6(this) )
    sub_4037AD();
  v11 = v15;
  v8 = v15;
  v9 = v15 + 1;
  v10 = (v15[1] - *v15) >> 3;
  v12 = sub_40385F(v15, a2);
  v6 = sub_402205(v15);
  Block = (void *)sub_4025D9(v12);
  v13 = (int)Block + 8 * v10;
  v7 = v13;
  v17 = 0;
  v5 = sub_402E6F(v15, v13, a2 - v10, *a3);
  v7 = v5;
  sub_4038B1(v15, *v8, *v9, (int)Block);
  v17 = -1;
  return sub_4037BD(v15, (int)Block, a2, v12);
}
// 4037AD: using guessed type void __noreturn sub_4037AD(void);

//----- (0040349C) --------------------------------------------------------
int __cdecl sub_40349C(char a1, char a2, int a3, int a4)
{
  _DWORD v5[3]; // [esp+0h] [ebp-20h] BYREF
  int v6; // [esp+Ch] [ebp-14h]
  int v7; // [esp+10h] [ebp-10h]
  int v8; // [esp+1Ch] [ebp-4h]

  v7 = unknown_libname_4(&a1);
  v6 = unknown_libname_4(&a2);
  sub_403665(v5, a3, a4);
  v8 = 0;
  while ( v7 != v6 )
  {
    sub_403DB9(v5, v7);
    v7 += 8;
  }
  a3 = sub_403629(v5);
  v8 = -1;
  sub_403643();
  return a3;
}
// 403529: using guessed type _DWORD __cdecl unknown_libname_4(_DWORD);
// 40349C: using guessed type _DWORD var_20[3];

//----- (00403533) --------------------------------------------------------
unsigned int __cdecl sub_403533(unsigned int a1)
{
  void *v1; // eax
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-4h]

  if ( a1 + 35 <= a1 )
    sub_40152F();
  v1 = operator new(a1 + 35, v3, (const char *)(a1 + 35), v4);
  if ( !v1 )
    invalid_parameter_noinfo_noreturn();
  *(_DWORD *)((((unsigned int)v1 + 35) & 0xFFFFFFE0) - 4) = v1;
  return ((unsigned int)v1 + 35) & 0xFFFFFFE0;
}
// 403552: variable 'v3' is possibly undefined
// 403552: variable 'v4' is possibly undefined

//----- (00403591) --------------------------------------------------------
int __cdecl sub_403591(int *a1, int *a2)
{
  int v3; // [esp+0h] [ebp-4h]

  v3 = *a1;
  *a1 = *a2;
  return v3;
}

//----- (004035AC) --------------------------------------------------------
int __cdecl sub_4035AC(int a1, int a2, int a3)
{
  _DWORD v4[3]; // [esp+0h] [ebp-1Ch] BYREF
  int v5; // [esp+Ch] [ebp-10h]
  int v6; // [esp+18h] [ebp-4h]

  sub_403665(v4, a1, a3);
  v6 = 0;
  while ( a2 )
  {
    sub_403E0A(v4);
    --a2;
  }
  v5 = sub_403629(v4);
  v6 = -1;
  sub_403643();
  return v5;
}
// 4035AC: using guessed type _DWORD var_1C[3];

//----- (00403618) --------------------------------------------------------
int __thiscall sub_403618(_DWORD *this)
{
  return sub_403751(this);
}

//----- (00403629) --------------------------------------------------------
int __thiscall sub_403629(_DWORD *this)
{
  *this = this[1];
  return this[1];
}

//----- (00403643) --------------------------------------------------------
void sub_403643()
{
  sub_402C63();
}

//----- (00403665) --------------------------------------------------------
_DWORD *__thiscall sub_403665(_DWORD *this, int a2, int a3)
{
  *this = a2;
  this[1] = a2;
  this[2] = a3;
  return this;
}

//----- (0040368D) --------------------------------------------------------
_DWORD *__thiscall sub_40368D(_DWORD *this, int a2, int a3)
{
  sub_403957(this, a2, a3);
  return this;
}

//----- (004036A9) --------------------------------------------------------
_WORD *__thiscall sub_4036A9(_WORD *this, __int16 a2, __int16 a3)
{
  sub_40397A(this, a2, a3);
  return this;
}

//----- (004036C5) --------------------------------------------------------
_DWORD *__thiscall sub_4036C5(_DWORD *this, int a2, int a3, int a4, int a5)
{
  sub_40399D(this, a2, a3, a4, a5);
  return this;
}

//----- (004036E7) --------------------------------------------------------
char __thiscall sub_4036E7(_BYTE *this)
{
  return this[4];
}

//----- (004036F6) --------------------------------------------------------
_DWORD *__thiscall sub_4036F6(_DWORD *this, int a2, int a3)
{
  sub_4039C6(this, a2);
  *((_BYTE *)this + 4) = std::istream::_Ipfx(*this, a3);
  return this;
}
// 407058: using guessed type int __thiscall std::istream::_Ipfx(_DWORD, _DWORD);

//----- (00403751) --------------------------------------------------------
int __thiscall sub_403751(_DWORD *this)
{
  int result; // eax

  result = std::ios::rdbuf(*(_DWORD *)(*(_DWORD *)*this + 4) + *this, this, *this);
  if ( result )
    return (*(int (__thiscall **)(int))(*(_DWORD *)result + 8))(result);
  return result;
}
// 407038: using guessed type int __thiscall std::ios::rdbuf(_DWORD, _DWORD, _DWORD);

//----- (004037AD) --------------------------------------------------------
void __noreturn sub_4037AD()
{
  std::_Xlength_error("vector too long");
}
// 4037AD: using guessed type void __noreturn sub_4037AD();
// 40706C: using guessed type void __cdecl __noreturn std::_Xlength_error(const char *);

//----- (004037BD) --------------------------------------------------------
int __thiscall sub_4037BD(int *this, int a2, int a3, int a4)
{
  int result; // eax
  _DWORD *v5; // [esp+Ch] [ebp-14h]
  int *v6; // [esp+10h] [ebp-10h]

  v6 = this + 1;
  v5 = this + 2;
  sub_401642();
  if ( *this )
  {
    sub_4025B7(this, *this, *v6);
    sub_402205(this);
    sub_40261E((void *)*this, (*v5 - *this) >> 3);
  }
  *this = a2;
  *v6 = a2 + 8 * a3;
  result = a2 + 8 * a4;
  *v5 = result;
  return result;
}

//----- (0040385F) --------------------------------------------------------
int __thiscall sub_40385F(_DWORD *this, unsigned int a2)
{
  int v3; // [esp+4h] [ebp-Ch]
  unsigned int v5; // [esp+Ch] [ebp-4h]

  v5 = sub_403A30(this);
  v3 = sub_4038D6(this);
  if ( v5 > v3 - (v5 >> 1) )
    return v3;
  if ( v5 + (v5 >> 1) >= a2 )
    return v5 + (v5 >> 1);
  return a2;
}

//----- (004038B1) --------------------------------------------------------
int __thiscall sub_4038B1(void *this, char a2, char a3, int a4)
{
  int v5; // [esp+4h] [ebp-4h]

  LOBYTE(v5) = 0;
  return sub_403A0B(this, a2, a3, a4, v5);
}
// 4038CD: variable 'v5' is possibly undefined

//----- (004038D6) --------------------------------------------------------
int __thiscall sub_4038D6(void *this)
{
  int v2; // [esp+0h] [ebp-Ch] BYREF
  int v3[2]; // [esp+4h] [ebp-8h] BYREF

  v3[1] = (int)this;
  sub_402205(this);
  v3[0] = sub_403A4E();
  v2 = unknown_libname_1();
  return *sub_402B21(&v2, v3);
}
// 40159B: using guessed type int unknown_libname_1(void);

//----- (0040390C) --------------------------------------------------------
_DWORD *__thiscall sub_40390C(_DWORD *this, unsigned int a2)
{
  sub_403A58(this, a2, -1, 1812433253);
  return this;
}

//----- (0040392C) --------------------------------------------------------
_DWORD *__thiscall sub_40392C(_DWORD *this, unsigned int a2)
{
  sub_4027F8(this, a2);
  sub_40263A(this, a2);
  return this;
}

//----- (00403957) --------------------------------------------------------
_DWORD *__thiscall sub_403957(_DWORD *this, int a2, int a3)
{
  sub_403A80(this, a2, a3);
  return this;
}

//----- (0040397A) --------------------------------------------------------
_WORD *__thiscall sub_40397A(_WORD *this, __int16 a2, __int16 a3)
{
  sub_403A9C(this, a2, a3);
  return this;
}

//----- (0040399D) --------------------------------------------------------
_DWORD *__thiscall sub_40399D(_DWORD *this, int a2, int a3, int a4, int a5)
{
  sub_403AB8(this, a2, a3, a4, a5);
  return this;
}

//----- (004039C6) --------------------------------------------------------
int __thiscall sub_4039C6(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-8h]
  int v4; // [esp+8h] [ebp-4h]

  *this = a2;
  v4 = std::ios::rdbuf(*(_DWORD *)(*(_DWORD *)*this + 4) + *this, *this, this);
  if ( v4 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 4))(v4);
  return v3;
}
// 403A04: variable 'v3' is possibly undefined
// 407038: using guessed type int __thiscall std::ios::rdbuf(_DWORD, _DWORD, _DWORD);

//----- (00403A0B) --------------------------------------------------------
int __thiscall sub_403A0B(void *this, char a2, char a3, int a4, int a5)
{
  void *v5; // eax

  v5 = sub_402205(this);
  return sub_40349C(a2, a3, a4, (int)v5);
}

//----- (00403A30) --------------------------------------------------------
int __thiscall sub_403A30(_DWORD *this)
{
  return (this[2] - *this) >> 3;
}

//----- (00403A4E) --------------------------------------------------------
int sub_403A4E()
{
  return 0x1FFFFFFF;
}

//----- (00403A58) --------------------------------------------------------
_DWORD *__thiscall sub_403A58(_DWORD *this, unsigned int a2, int a3, int a4)
{
  this[1249] = a3;
  sub_403ADA(this, a2, a4);
  return this;
}

//----- (00403A80) --------------------------------------------------------
_DWORD *__thiscall sub_403A80(_DWORD *this, int a2, int a3)
{
  sub_403B49(this, a2, a3);
  return this;
}

//----- (00403A9C) --------------------------------------------------------
_WORD *__thiscall sub_403A9C(_WORD *this, __int16 a2, __int16 a3)
{
  sub_403B65(this, a2, a3);
  return this;
}

//----- (00403AB8) --------------------------------------------------------
_DWORD *__thiscall sub_403AB8(_DWORD *this, int a2, int a3, int a4, int a5)
{
  sub_403B85(this, a2, a3, a4, a5);
  return this;
}

//----- (00403ADA) --------------------------------------------------------
_DWORD *__thiscall sub_403ADA(_DWORD *this, unsigned int a2, int a3)
{
  int v3; // eax
  _DWORD *result; // eax
  unsigned int v5; // [esp+8h] [ebp-8h]
  unsigned int i; // [esp+Ch] [ebp-4h]

  this[1] = a2;
  v5 = a2;
  for ( i = 1; i < 0x270; ++i )
  {
    v3 = a3 * (v5 ^ (v5 >> 30));
    this[i + 1] = v3 + i;
    v5 = v3 + i;
  }
  result = this;
  *this = 624;
  return result;
}

//----- (00403B49) --------------------------------------------------------
_DWORD *__thiscall sub_403B49(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax

  *this = a2;
  result = this;
  this[1] = a3;
  return result;
}

//----- (00403B65) --------------------------------------------------------
_WORD *__thiscall sub_403B65(_WORD *this, __int16 a2, __int16 a3)
{
  _WORD *result; // eax

  *this = a2;
  result = this;
  this[1] = a3;
  return result;
}

//----- (00403B85) --------------------------------------------------------
_DWORD *__thiscall sub_403B85(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *result; // eax

  *this = a2;
  this[1] = a3;
  result = this;
  this[2] = a4;
  this[3] = a5;
  return result;
}

//----- (00403BAD) --------------------------------------------------------
_DWORD *__thiscall sub_403BAD(_DWORD *this, int a2, int a3)
{
  *this = *(_DWORD *)unknown_libname_3(a3);
  return this;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00403BCB) --------------------------------------------------------
_DWORD *__cdecl sub_403BCB(_DWORD *a1, int *a2, void *a3)
{
  int v3; // eax
  __int64 v4; // kr00_8
  __int64 *v5; // eax
  __int64 v7; // [esp+8h] [ebp-18h] BYREF
  __int64 v8; // [esp+10h] [ebp-10h] BYREF
  int v9[2]; // [esp+18h] [ebp-8h] BYREF

  v3 = a2[1];
  v9[0] = *a2;
  v9[1] = v3;
  v4 = sub_401882(v9);
  v5 = sub_403F7F(&v7, a3);
  v8 = sub_401882(v5) + v4;
  sub_401864(a1, &v8);
  return a1;
}

//----- (00403C1C) --------------------------------------------------------
bool __cdecl sub_403C1C(_DWORD *a1, _DWORD *a2)
{
  return !sub_403FAC(a2, a1);
}

//----- (00403C46) --------------------------------------------------------
_DWORD *__cdecl sub_403C46(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  int v4; // [esp+0h] [ebp-18h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int *v6; // [esp+10h] [ebp-8h]
  int *v7; // [esp+14h] [ebp-4h]

  v7 = sub_401FA1(a3, &v5);
  v6 = sub_401FA1(a2, &v4);
  sub_403FDF(a1, v6, v7);
  return a1;
}

//----- (00403C80) --------------------------------------------------------
bool __cdecl sub_403C80(int a1, void *a2)
{
  _DWORD *v2; // eax
  _QWORD *v3; // eax
  int v5; // [esp+0h] [ebp-48h] BYREF
  int v6; // [esp+8h] [ebp-40h] BYREF
  int v7; // [esp+10h] [ebp-38h] BYREF
  __int64 v8; // [esp+18h] [ebp-30h] BYREF
  __int64 v9; // [esp+20h] [ebp-28h] BYREF
  _DWORD v10[2]; // [esp+28h] [ebp-20h] BYREF
  __int64 v11; // [esp+30h] [ebp-18h] BYREF
  __int64 v12; // [esp+38h] [ebp-10h] BYREF
  _DWORD *v13; // [esp+40h] [ebp-8h]
  bool v14; // [esp+47h] [ebp-1h]

  v11 = 864000000000000i64;
  v9 = 0x412A5E0000000000i64;
  v13 = sub_401797(&v7);
  v2 = sub_401FA1(v13, &v6);
  sub_404034(&v12, v2);
  v14 = sub_404061(&v9, a2);
  if ( v14 )
  {
    sub_403E6F(&v12, &v11);
  }
  else
  {
    v3 = sub_4040BD(&v5, a2);
    sub_403E6F(&v12, v3);
  }
  sub_403E95(v10, &v12);
  *(_QWORD *)a1 = sub_401882(v10);
  sub_403F52(&v8, v10);
  sub_403E49(&v12, &v8);
  *(_DWORD *)(a1 + 8) = sub_401882(&v12);
  return v14;
}
// 403C80: using guessed type _DWORD var_20[2];

//----- (00403D4C) --------------------------------------------------------
int __thiscall sub_403D4C(int *this, int a2)
{
  return sub_40415C(this, a2, *this, this[1], this[2], this[3]);
}

//----- (00403D73) --------------------------------------------------------
__int16 __thiscall sub_403D73(__int16 *this, int a2)
{
  return sub_4041FE(this, a2, *this, this[1]);
}

//----- (00403D98) --------------------------------------------------------
int __thiscall sub_403D98(int *this, int a2)
{
  return sub_404278(this, a2, *this, this[1]);
}

//----- (00403DB9) --------------------------------------------------------
int __thiscall sub_403DB9(_DWORD *this, int a2)
{
  int result; // eax
  void *v3; // [esp+4h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-8h]

  v4 = unknown_libname_3(a2);
  v3 = (void *)unknown_libname_3(this[1]);
  sub_4042E0(this[2], v3, v4);
  result = this[1] + 8;
  this[1] = result;
  return result;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00403E0A) --------------------------------------------------------
int __thiscall sub_403E0A(_DWORD *this)
{
  int result; // eax
  void *v2; // [esp+4h] [ebp-8h]

  v2 = (void *)unknown_libname_3(this[1]);
  sub_40430D(this[2], v2);
  result = this[1] + 8;
  this[1] = result;
  return result;
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (00403E49) --------------------------------------------------------
_QWORD *__thiscall sub_403E49(_QWORD *this, _QWORD *a2)
{
  *this -= *a2;
  return this;
}

//----- (00403E6F) --------------------------------------------------------
_QWORD *__thiscall sub_403E6F(_QWORD *this, _QWORD *a2)
{
  *this += *a2;
  return this;
}

//----- (00403E95) --------------------------------------------------------
_DWORD *__cdecl sub_403E95(_DWORD *a1, void *a2)
{
  __int64 v3; // [esp+8h] [ebp-1Ch] BYREF
  char v4; // [esp+22h] [ebp-2h]
  char v5; // [esp+23h] [ebp-1h]

  v5 = 1;
  v4 = 0;
  v3 = sub_401882(a2) / 1000000000;
  sub_401864(a1, &v3);
  return a1;
}

//----- (00403F52) --------------------------------------------------------
__int64 *__thiscall sub_403F52(__int64 *this, void *a2)
{
  _DWORD *v2; // eax
  __int64 v3; // rax
  int v5; // [esp+0h] [ebp-Ch] BYREF
  __int64 *v6; // [esp+8h] [ebp-4h]

  v6 = this;
  v2 = sub_404B5C(&v5, a2);
  v3 = sub_401882(v2);
  *v6 = v3;
  return v6;
}

//----- (00403F7F) --------------------------------------------------------
__int64 *__thiscall sub_403F7F(__int64 *this, void *a2)
{
  _DWORD *v2; // eax
  __int64 v3; // rax
  int v5; // [esp+0h] [ebp-Ch] BYREF
  __int64 *v6; // [esp+8h] [ebp-4h]

  v6 = this;
  v2 = sub_404C18(&v5, a2);
  v3 = sub_401882(v2);
  *v6 = v3;
  return v6;
}

//----- (00403FAC) --------------------------------------------------------
bool __cdecl sub_403FAC(_DWORD *a1, _DWORD *a2)
{
  int v3; // [esp+0h] [ebp-18h] BYREF
  int v4; // [esp+8h] [ebp-10h] BYREF
  int *v5; // [esp+10h] [ebp-8h]
  int *v6; // [esp+14h] [ebp-4h]

  v6 = sub_401FA1(a2, &v4);
  v5 = sub_401FA1(a1, &v3);
  return sub_404CD4(v5, v6);
}

//----- (00403FDF) --------------------------------------------------------
_DWORD *__cdecl sub_403FDF(_DWORD *a1, int *a2, int *a3)
{
  int v3; // eax
  int v4; // eax
  __int64 v5; // rax
  __int64 v7; // [esp+8h] [ebp-18h] BYREF
  int v8[2]; // [esp+10h] [ebp-10h] BYREF
  int v9[2]; // [esp+18h] [ebp-8h] BYREF

  v3 = a2[1];
  v9[0] = *a2;
  v9[1] = v3;
  v4 = a3[1];
  v8[0] = *a3;
  v8[1] = v4;
  v5 = sub_401882(v9);
  v7 = v5 - sub_401882(v8);
  sub_401864(a1, &v7);
  return a1;
}

//----- (00404034) --------------------------------------------------------
__int64 *__thiscall sub_404034(__int64 *this, void *a2)
{
  _DWORD *v2; // eax
  __int64 v3; // rax
  int v5; // [esp+0h] [ebp-Ch] BYREF
  __int64 *v6; // [esp+8h] [ebp-4h]

  v6 = this;
  v2 = sub_404D3E(&v5, a2);
  v3 = sub_401882(v2);
  *v6 = v3;
  return v6;
}

//----- (00404061) --------------------------------------------------------
bool __cdecl sub_404061(void *a1, void *a2)
{
  double *v2; // eax
  double *v3; // eax
  double v5; // [esp+0h] [ebp-2Ch] BYREF
  double v6; // [esp+8h] [ebp-24h] BYREF
  double v7; // [esp+10h] [ebp-1Ch]
  double v8; // [esp+18h] [ebp-14h]
  double v9; // [esp+20h] [ebp-Ch]

  v2 = sub_404DF1(&v6, a1);
  v9 = sub_401893(v2);
  v7 = v9;
  v3 = sub_404E1B(&v5, a2);
  v8 = sub_401893(v3);
  return v8 > v7;
}
// 404061: using guessed type double var_24;
// 404061: using guessed type double var_2C;

//----- (004040BD) --------------------------------------------------------
_DWORD *__cdecl sub_4040BD(_DWORD *a1, void *a2)
{
  __int64 v3; // [esp+18h] [ebp-Ch] BYREF
  char v4; // [esp+22h] [ebp-2h]
  char v5; // [esp+23h] [ebp-1h]

  v5 = 1;
  v4 = 1;
  v3 = sub_401882(a2);
  sub_401864(a1, &v3);
  return a1;
}
// 4040BD: using guessed type __int64 var_C;

//----- (0040415C) --------------------------------------------------------
int __thiscall sub_40415C(void *this, int a2, int a3, int a4, int a5, int a6)
{
  __int64 v6; // rax
  __int64 v7; // rax
  _DWORD v9[4]; // [esp+0h] [ebp-34h] BYREF
  __int64 v10; // [esp+10h] [ebp-24h]
  unsigned __int64 v11; // [esp+18h] [ebp-1Ch]
  __int64 v12; // [esp+20h] [ebp-14h]
  __int64 v13; // [esp+28h] [ebp-Ch]
  void *v14; // [esp+30h] [ebp-4h]

  v14 = this;
  sub_404700(v9, a2);
  LODWORD(v6) = sub_4047C1(a3, a4);
  v13 = v6;
  LODWORD(v7) = sub_4047C1(a5, a6);
  v12 = v7;
  v10 = v7 - v13;
  if ( (HIDWORD(v10) & (unsigned int)v10) == -1 )
    v11 = sub_404528((int)v9);
  else
    v11 = sub_40459A((int)v9, v12 - v13 + 1);
  return sub_4047C1(v13 + v11, (v13 + v11) >> 32);
}
// 40417D: variable 'v6' is possibly undefined
// 404190: variable 'v7' is possibly undefined
// 40415C: using guessed type _DWORD var_34[4];

//----- (004041FE) --------------------------------------------------------
__int16 __thiscall sub_4041FE(void *this, int a2, __int16 a3, __int16 a4)
{
  _DWORD v5[4]; // [esp+0h] [ebp-1Ch] BYREF
  __int16 v6; // [esp+10h] [ebp-Ch]
  unsigned __int16 v7; // [esp+14h] [ebp-8h]
  unsigned __int16 v8; // [esp+18h] [ebp-4h]

  v5[3] = this;
  sub_40441A(v5, a2);
  v8 = sub_4047A8(a3);
  v7 = sub_4047A8(a4);
  if ( v7 - v8 == 0xFFFF )
    v6 = sub_40432A(v5);
  else
    v6 = sub_404478(v5, v7 - v8 + 1);
  return sub_4047A8(v8 + v6);
}

//----- (00404278) --------------------------------------------------------
int __thiscall sub_404278(void *this, int a2, int a3, int a4)
{
  _DWORD v5[4]; // [esp+0h] [ebp-1Ch] BYREF
  unsigned int v6; // [esp+10h] [ebp-Ch]
  int v7; // [esp+14h] [ebp-8h]
  int v8; // [esp+18h] [ebp-4h]

  v5[3] = this;
  sub_40441A(v5, a2);
  v8 = sub_40478F(a3);
  v7 = sub_40478F(a4);
  if ( v7 - v8 == -1 )
    v6 = sub_40432A(v5);
  else
    v6 = sub_40437B(v5, v7 - v8 + 1);
  return sub_40478F(v8 + v6);
}

//----- (004042E0) --------------------------------------------------------
_DWORD *__cdecl sub_4042E0(int a1, void *a2, int a3)
{
  _DWORD *v4; // [esp+0h] [ebp-8h]
  _DWORD *v5; // [esp+4h] [ebp-4h]

  v4 = operator new(8u, a2);
  v5 = (_DWORD *)unknown_libname_3(a3);
  return sub_4047DE(v4, v5);
}
// 40163A: using guessed type _DWORD __cdecl unknown_libname_3(_DWORD);

//----- (0040430D) --------------------------------------------------------
int *__cdecl sub_40430D(int a1, void *a2)
{
  int *v3; // [esp+0h] [ebp-4h]

  v3 = (int *)operator new(8u, a2);
  return sub_404802(v3);
}

//----- (0040432A) --------------------------------------------------------
unsigned int __thiscall sub_40432A(_DWORD *this)
{
  unsigned int i; // [esp+4h] [ebp-8h]
  unsigned int v4; // [esp+8h] [ebp-4h]
  int v5; // [esp+8h] [ebp-4h]

  v4 = 0;
  for ( i = 0; i < 0x20; i += this[1] )
  {
    v5 = 2 * (v4 << (this[1] - 1));
    v4 = v5 | sub_404823(this);
  }
  return v4;
}

//----- (0040437B) --------------------------------------------------------
int __thiscall sub_40437B(_DWORD *this, unsigned int a2)
{
  unsigned int v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+4h] [ebp-8h]
  unsigned int i; // [esp+8h] [ebp-4h]

  do
  {
    v4 = 0;
    for ( i = 0; i < a2 - 1; i = this[2] | (2 * (i << (this[1] - 1))) )
    {
      v5 = 2 * (v4 << (this[1] - 1));
      v4 = v5 | sub_404823(this);
    }
  }
  while ( v4 / a2 >= i / a2 && i % a2 != a2 - 1 );
  return v4 % a2;
}

//----- (0040441A) --------------------------------------------------------
_DWORD *__thiscall sub_40441A(_DWORD *this, int a2)
{
  int v2; // esi

  *this = a2;
  this[1] = 32;
  for ( this[2] = -1; ; this[2] >>= 1 )
  {
    v2 = std::numeric_limits<unsigned int>::max();
    if ( (unsigned int)(v2 - __scrt_stub_for_initialize_mta()) >= this[2] )
      break;
    --this[1];
  }
  return this;
}
// 4015A5: using guessed type int __scrt_stub_for_initialize_mta(void);
// 4024F0: using guessed type int std::numeric_limits<unsigned int>::max(void);

//----- (00404478) --------------------------------------------------------
__int16 __thiscall sub_404478(_DWORD *this, unsigned __int16 a2)
{
  unsigned int v4; // [esp+8h] [ebp-8h]
  int v5; // [esp+8h] [ebp-8h]
  unsigned int i; // [esp+Ch] [ebp-4h]

  do
  {
    v4 = 0;
    for ( i = 0; i < (unsigned int)a2 - 1; i = this[2] | (2 * (i << (this[1] - 1))) )
    {
      v5 = 2 * (v4 << (this[1] - 1));
      v4 = v5 | sub_404823(this);
    }
  }
  while ( v4 / a2 >= i / a2 && i % a2 != a2 - 1 );
  return v4 % a2;
}

//----- (00404528) --------------------------------------------------------
__int64 __thiscall sub_404528(int this)
{
  __int64 v2; // [esp+0h] [ebp-10h]
  __int64 v3; // [esp+0h] [ebp-10h]
  unsigned int i; // [esp+Ch] [ebp-4h]

  v2 = 0i64;
  for ( i = 0; i < 0x40; i += *(_DWORD *)(this + 4) )
  {
    v3 = 2 * (v2 << ((unsigned __int8)*(_DWORD *)(this + 4) - 1));
    v2 = v3 | sub_404857((_QWORD *)this);
  }
  return v2;
}

//----- (0040459A) --------------------------------------------------------
unsigned __int64 __thiscall sub_40459A(int this, unsigned __int64 a2)
{
  unsigned __int64 v3; // [esp+30h] [ebp-14h]
  __int64 v4; // [esp+30h] [ebp-14h]
  unsigned __int64 i; // [esp+38h] [ebp-Ch]

  do
  {
    v3 = 0i64;
    for ( i = 0i64; i < a2 - 1; i = *(_QWORD *)(this + 8) | (2 * (i << ((unsigned __int8)*(_DWORD *)(this + 4) - 1))) )
    {
      v4 = 2 * (v3 << ((unsigned __int8)*(_DWORD *)(this + 4) - 1));
      v3 = v4 | sub_404857((_QWORD *)this);
    }
  }
  while ( v3 / a2 >= i / a2 && i % a2 != a2 - 1 );
  return v3 % a2;
}

//----- (00404700) --------------------------------------------------------
_DWORD *__thiscall sub_404700(_DWORD *this, int a2)
{
  int v2; // esi

  *this = a2;
  this[1] = 64;
  this[2] = -1;
  this[3] = -1;
  while ( 1 )
  {
    v2 = std::numeric_limits<unsigned int>::max();
    if ( (unsigned __int64)(unsigned int)(v2 - __scrt_stub_for_initialize_mta()) >= *((_QWORD *)this + 1) )
      break;
    --this[1];
    *((_QWORD *)this + 1) >>= 1;
  }
  return this;
}
// 4015A5: using guessed type int __scrt_stub_for_initialize_mta(void);
// 4024F0: using guessed type int std::numeric_limits<unsigned int>::max(void);

//----- (0040478F) --------------------------------------------------------
int __cdecl sub_40478F(int a1)
{
  return sub_4048A7(a1);
}

//----- (004047A8) --------------------------------------------------------
__int16 __cdecl sub_4047A8(__int16 a1)
{
  return sub_4048D1(a1);
}

//----- (004047C1) --------------------------------------------------------
int __cdecl sub_4047C1(int a1, int a2)
{
  return operator"" _l(a1, a2);
}
// 4048DA: using guessed type _DWORD __cdecl operator"" _l(_DWORD, _DWORD);

//----- (004047DE) --------------------------------------------------------
_DWORD *__thiscall sub_4047DE(_DWORD *this, _DWORD *a2)
{
  *this = *a2;
  this[1] = a2[1];
  return this;
}

//----- (00404802) --------------------------------------------------------
int *__thiscall sub_404802(int *this)
{
  *this = sub_4029C4();
  this[1] = *this;
  return this;
}

//----- (00404823) --------------------------------------------------------
unsigned int __thiscall sub_404823(_DWORD *this)
{
  int v1; // esi
  unsigned int v3; // [esp+4h] [ebp-8h]

  do
  {
    v1 = sub_4048E5((_DWORD *)*this);
    v3 = v1 - __scrt_stub_for_initialize_mta();
  }
  while ( v3 > this[2] );
  return v3;
}
// 4015A5: using guessed type int __scrt_stub_for_initialize_mta(void);

//----- (00404857) --------------------------------------------------------
__int64 __thiscall sub_404857(_QWORD *this)
{
  int v1; // esi
  __int64 v3; // [esp+4h] [ebp-10h]

  do
  {
    v1 = sub_4048E5(*(_DWORD **)this);
    v3 = (unsigned int)(v1 - __scrt_stub_for_initialize_mta());
  }
  while ( (unsigned __int64)(unsigned int)v3 > this[1] );
  return v3;
}
// 4015A5: using guessed type int __scrt_stub_for_initialize_mta(void);

//----- (004048A7) --------------------------------------------------------
int __cdecl sub_4048A7(int a1)
{
  return a1 + 0x80000000;
}

//----- (004048D1) --------------------------------------------------------
__int16 __cdecl sub_4048D1(__int16 a1)
{
  return a1;
}

//----- (004048E5) --------------------------------------------------------
int __thiscall sub_4048E5(_DWORD *this)
{
  unsigned int v2; // [esp+0h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-4h]
  unsigned int v5; // [esp+8h] [ebp-4h]

  if ( *this == 624 )
  {
    sub_40497E(this);
  }
  else if ( *this >= 0x4E0u )
  {
    sub_404A02(this);
  }
  v2 = this[++*this];
  v4 = v2 ^ this[1249] & (v2 >> 11);
  v5 = v4 ^ (v4 << 7) & 0x9D2C5680 ^ ((v4 ^ (v4 << 7) & 0x9D2C5680) << 15) & 0xEFC60000;
  return v5 ^ (v5 >> 18);
}

//----- (0040497E) --------------------------------------------------------
unsigned int __thiscall sub_40497E(_DWORD *this)
{
  unsigned int result; // eax
  int v2; // [esp+0h] [ebp-10h]
  unsigned int i; // [esp+Ch] [ebp-4h]

  for ( i = 624; i < 0x4E0; ++i )
  {
    if ( (this[i - 622] & 1) != 0 )
      v2 = -1727483681;
    else
      v2 = 0;
    this[i + 1] = this[i - 226] ^ v2 ^ ((this[i - 622] & 0x7FFFFFFF | this[i - 623] & 0x80000000) >> 1);
    result = i + 1;
  }
  return result;
}

//----- (00404A02) --------------------------------------------------------
_BYTE *__thiscall sub_404A02(_BYTE *this)
{
  _BYTE *result; // eax
  int v2; // [esp+0h] [ebp-20h]
  int v3; // [esp+8h] [ebp-18h]
  int v4; // [esp+10h] [ebp-10h]
  unsigned int i; // [esp+1Ch] [ebp-4h]

  for ( i = 0; i < 0xE3; ++i )
  {
    if ( (this[4 * i + 2504] & 1) != 0 )
      v4 = -1727483681;
    else
      v4 = 0;
    *(_DWORD *)&this[4 * i + 4] = *(_DWORD *)&this[4 * i + 4088] ^ v4 ^ ((*(_DWORD *)&this[4 * i + 2504] & 0x7FFFFFFF | *(_DWORD *)&this[4 * i + 2500] & 0x80000000) >> 1);
  }
  while ( i < 0x26F )
  {
    if ( (this[4 * i + 2504] & 1) != 0 )
      v3 = -1727483681;
    else
      v3 = 0;
    *(_DWORD *)&this[4 * i + 4] = *(_DWORD *)&this[4 * i - 904] ^ v3 ^ ((*(_DWORD *)&this[4 * i + 2504] & 0x7FFFFFFF | *(_DWORD *)&this[4 * i + 2500] & 0x80000000) >> 1);
    ++i;
  }
  if ( (this[4] & 1) != 0 )
    v2 = -1727483681;
  else
    v2 = 0;
  *(_DWORD *)&this[4 * i + 4] = *((_DWORD *)this + 397) ^ v2 ^ ((*((_DWORD *)this + 1) & 0x7FFFFFFF | *(_DWORD *)&this[4 * i + 2500] & 0x80000000) >> 1);
  result = this;
  *(_DWORD *)this = 0;
  return result;
}

//----- (00404B5C) --------------------------------------------------------
_DWORD *__cdecl sub_404B5C(_DWORD *a1, void *a2)
{
  __int64 v3; // [esp+10h] [ebp-14h] BYREF
  char v4; // [esp+22h] [ebp-2h]
  char v5; // [esp+23h] [ebp-1h]

  v5 = 0;
  v4 = 1;
  v3 = 1000000000 * sub_401882(a2);
  sub_401864(a1, &v3);
  return a1;
}

//----- (00404C18) --------------------------------------------------------
_DWORD *__cdecl sub_404C18(_DWORD *a1, void *a2)
{
  __int64 v3; // [esp+10h] [ebp-14h] BYREF
  char v4; // [esp+22h] [ebp-2h]
  char v5; // [esp+23h] [ebp-1h]

  v5 = 0;
  v4 = 1;
  v3 = 1000000 * sub_401882(a2);
  sub_401864(a1, &v3);
  return a1;
}

//----- (00404CD4) --------------------------------------------------------
bool __cdecl sub_404CD4(int *a1, int *a2)
{
  int v2; // eax
  int v3; // eax
  __int64 v4; // kr00_8
  int v6[2]; // [esp+8h] [ebp-24h] BYREF
  int v7[2]; // [esp+10h] [ebp-1Ch] BYREF

  v2 = a1[1];
  v7[0] = *a1;
  v7[1] = v2;
  v3 = a2[1];
  v6[0] = *a2;
  v6[1] = v3;
  v4 = sub_401882(v7);
  return v4 < sub_401882(v6);
}

//----- (00404D3E) --------------------------------------------------------
_DWORD *__cdecl sub_404D3E(_DWORD *a1, void *a2)
{
  __int64 v3; // [esp+10h] [ebp-14h] BYREF
  char v4; // [esp+22h] [ebp-2h]
  char v5; // [esp+23h] [ebp-1h]

  v5 = 0;
  v4 = 1;
  v3 = 100 * sub_401882(a2);
  sub_401864(a1, &v3);
  return a1;
}

//----- (00404DF1) --------------------------------------------------------
double *__thiscall sub_404DF1(double *this, void *a2)
{
  _QWORD *v2; // eax
  double v3; // st7
  __int64 v5; // [esp+0h] [ebp-Ch] BYREF
  double *v6; // [esp+8h] [ebp-4h]

  v6 = this;
  v2 = sub_404E45(&v5, a2);
  v3 = sub_401893(v2);
  *v6 = v3;
  return v6;
}

//----- (00404E1B) --------------------------------------------------------
double *__thiscall sub_404E1B(double *this, void *a2)
{
  _QWORD *v2; // eax
  double v3; // st7
  __int64 v5; // [esp+0h] [ebp-Ch] BYREF
  double *v6; // [esp+8h] [ebp-4h]

  v6 = this;
  v2 = sub_404F17(&v5, a2);
  v3 = sub_401893(v2);
  *v6 = v3;
  return v6;
}

//----- (00404E45) --------------------------------------------------------
_QWORD *__cdecl sub_404E45(_QWORD *a1, void *a2)
{
  double v3; // [esp+20h] [ebp-1Ch] BYREF
  double v4; // [esp+28h] [ebp-14h]
  char v5; // [esp+3Ah] [ebp-2h]
  char v6; // [esp+3Bh] [ebp-1h]

  v6 = 0;
  v5 = 1;
  v4 = sub_401893(a2);
  v3 = v4 * 1000000000.0;
  sub_404FF1(a1, &v3);
  return a1;
}

//----- (00404F17) --------------------------------------------------------
_QWORD *__cdecl sub_404F17(_QWORD *a1, void *a2)
{
  double v3; // [esp+18h] [ebp-Ch] BYREF
  char v4; // [esp+22h] [ebp-2h]
  char v5; // [esp+23h] [ebp-1h]

  v5 = 1;
  v4 = 1;
  v3 = (double)sub_401882(a2);
  sub_404FF1(a1, &v3);
  return a1;
}
// 404F17: using guessed type double var_C;

//----- (00404FF1) --------------------------------------------------------
_QWORD *__thiscall sub_404FF1(_QWORD *this, _QWORD *a2)
{
  *this = *a2;
  return this;
}

//----- (00405312) --------------------------------------------------------
void __cdecl sub_405312(void *Block)
{
  j_free(Block);
}

//----- (00405320) --------------------------------------------------------
_DWORD *__thiscall sub_405320(_DWORD *Block, char a2)
{
  *Block = &type_info::`vftable';
  if ( (a2 & 1) != 0 )
    sub_405312(Block);
  return Block;
}
// 4071B4: using guessed type void *type_info::`vftable';

//----- (004053EE) --------------------------------------------------------
int sub_4053EE()
{
  __scrt_initialize_default_local_stdio_options();
  return 0;
}
// 405B00: using guessed type int __scrt_initialize_default_local_stdio_options(void);

//----- (004053F6) --------------------------------------------------------
int sub_4053F6()
{
  int v0; // eax

  sub_40592E();
  v0 = UserMathErrorFunction();
  return set_new_mode(v0);
}

//----- (00405597) --------------------------------------------------------
_DWORD *__thiscall sub_405597(_DWORD *this)
{
  _DWORD *result; // eax

  this[1] = 0;
  result = this;
  this[2] = 0;
  this[1] = "bad allocation";
  *this = &std::bad_alloc::`vftable';
  return result;
}
// 4071C8: using guessed type void *std::bad_alloc::`vftable';

//----- (004055AF) --------------------------------------------------------
void __noreturn sub_4055AF()
{
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  sub_405597(pExceptionObject);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
}
// 4055AF: using guessed type void __noreturn sub_4055AF();
// 4055AF: using guessed type _DWORD pExceptionObject[3];

//----- (004055CC) --------------------------------------------------------
void __noreturn sub_4055CC()
{
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  sub_4014D2(pExceptionObject);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVbad_array_new_length_std__);
}
// 4055CC: using guessed type void __noreturn sub_4055CC();
// 4055CC: using guessed type _DWORD pExceptionObject[3];

//----- (004057B9) --------------------------------------------------------
int sub_4057B9()
{
  return 1;
}

//----- (004058E8) --------------------------------------------------------
int __cdecl UserMathErrorFunction()
{
  return 0;
}

//----- (0040592E) --------------------------------------------------------
LPTOP_LEVEL_EXCEPTION_FILTER sub_40592E()
{
  return SetUnhandledExceptionFilter(__scrt_unhandled_exception_filter);
}

//----- (00405990) --------------------------------------------------------
void sub_405990()
{
  dword_4090F0 = 0;
}
// 4090F0: using guessed type int dword_4090F0;

//----- (00405ACA) --------------------------------------------------------
void sub_405ACA()
{
  InitializeSListHead(&ListHead);
}

//----- (00405AD6) --------------------------------------------------------
char sub_405AD6()
{
  return 1;
}

//----- (00405AFA) --------------------------------------------------------
void *sub_405AFA()
{
  return &unk_409100;
}

//----- (00405B1D) --------------------------------------------------------
BOOL sub_405B1D()
{
  return dword_409010 == 0;
}
// 409010: using guessed type int dword_409010;

//----- (00405B29) --------------------------------------------------------
void *sub_405B29()
{
  return &unk_4094B0;
}

//----- (00405B2F) --------------------------------------------------------
void *sub_405B2F()
{
  return &unk_4094AC;
}

//----- (00405B35) --------------------------------------------------------
void sub_405B35()
{
  ;
}
// 405B35: could not find valid save-restore pair for edi

//----- (00405B61) --------------------------------------------------------
void __cdecl sub_405B61()
{
  ;
}
// 405B61: could not find valid save-restore pair for edi

//----- (004063A3) --------------------------------------------------------
unsigned __int64 __usercall sub_4063A3@<edx:eax>(unsigned __int64 a1@<edx:eax>)
{
  int v1; // ecx
  bool v2; // cc
  char v3; // cl

  v1 = HIDWORD(a1) >> 20;
  HIDWORD(a1) = HIDWORD(a1) & 0xFFFFF | 0x100000;
  v2 = v1 < 1075;
  v3 = v1 - 51;
  if ( v2 )
    return a1 >> (-v3 & 0x1F);
  else
    return a1 << (v3 & 0x1F);
}

//----- (00406612) --------------------------------------------------------
void __cdecl sub_406612()
{
  sub_4019DE(dword_40944C);
}
// 40944C: using guessed type int dword_40944C[3];

//----- (00406621) --------------------------------------------------------
void __cdecl sub_406621()
{
  sub_4019DE(dword_409458);
}
// 409458: using guessed type int dword_409458[3];

//----- (00406630) --------------------------------------------------------
void __cdecl sub_406630()
{
  sub_4019DE(dword_4094A0);
}
// 4094A0: using guessed type int dword_4094A0[3];

//----- (0040663F) --------------------------------------------------------
void __cdecl sub_40663F()
{
  sub_4019DE(dword_409440);
}
// 409440: using guessed type int dword_409440[3];

//----- (0040664E) --------------------------------------------------------
void __cdecl sub_40664E()
{
  sub_4019DE(dword_409464);
}
// 409464: using guessed type int dword_409464[3];

//----- (0040665D) --------------------------------------------------------
void __cdecl sub_40665D()
{
  sub_4019DE(dword_409494);
}
// 409494: using guessed type int dword_409494[3];

//----- (0040666C) --------------------------------------------------------
void __cdecl sub_40666C()
{
  sub_4019DE(dword_409434);
}
// 409434: using guessed type int dword_409434[3];

//----- (0040667B) --------------------------------------------------------
void __cdecl sub_40667B()
{
  sub_4019DE(dword_409488);
}
// 409488: using guessed type int dword_409488[3];

//----- (0040668A) --------------------------------------------------------
void __cdecl sub_40668A()
{
  sub_4020A1((void **)&unk_409470);
}

//----- (00406699) --------------------------------------------------------
void __cdecl sub_406699()
{
  std::_Fac_tidy_reg_t::~_Fac_tidy_reg_t((std::_Fac_tidy_reg_t *)&unk_4090BC);
}

// nfuncs=356 queued=265 decompiled=265 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 265 function(s)"
